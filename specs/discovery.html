<!DOCTYPE html>
<html>
<head>
<title>OSLC Discovery 3.0</title>
<meta charset='utf-8'>
<script	src='https://sspeiche.github.io/respec/builds/oasis/respec-oasis-common.js' async class='remove'></script>
<script  type="text/javascript" >
	var respecConfig = {
		// specification status (WD, CSD, CSPRD, CS, COS, OS, Errata, CND, CNPRD, CN). If in doubt use WD.
		// See http://docs.oasis-open.org/specGuidelines/ndr/namingDirectives.html#stage
		specStatus : "WD",
		
        // Only include h1 and h2 level
        maxTocLevel: 2,

		shortName : "oslc-discovery",

		// if your specification has a subtitle that goes below the main
		// formal title, define it here
		// subtitle   :  "Committee Specification Draft 01",

		// if you wish the publication date to be other than the last modification, set this
		// publishDate:  "2009-08-06",

		// if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
		// and its maturity status
		// previousPublishDate:  "1977-03-15",
		// previousMaturity:  "WD",

		// if there a publicly available Editor's Draft, this is the link
		edDraftURI:           "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/discovery.html",

		// if this is a LCWD, uncomment and set the end of its review period
		// lcEnd: "2009-08-05",
		
		// includePermalinks: true,

		chairs : [ {
			name : "Steve Speicher",
			url : "http://stevespeicher.me/",
			mailto : "sspeiche@us.ibm.com",
			company : "IBM",
			companyURL : "http://ibm.com/"
		} ],
		editors : [ {
			name : "Steve Speicher",
			url : "http://stevespeicher.me/",
			mailto : "sspeiche@us.ibm.com",
			company : "IBM",
			companyURL : "http://ibm.com/"
		} ],
		wg : "OASIS OSLC Lifecycle Integration Core (OSLC Core) TC",
		wgURI : "https://www.oasis-open.org/apps/org/workgroup/oslc-core/",
		namespaces : [ {
			href : "http://open-services.net/ns/core#",
			prefix : "oslc"
		} ],
		wgPublicList : "oslc-core-comments",

		localBiblio : {
			"OSLCCore3" : {
				title : "OSLC Core 3.0",
				href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/oslc-core-v3.html",
				authors : [ "Steve Speicher" ],
				publisher : "OASIS",
			},
			"ResourcePreview" : {
				title : "OSLC Resource Preview 3.0",
				href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html",
				authors : [ "Samuel Padgett", "Steve Speicher" ],
				publisher : "OASIS",
			},
			"Dialogs" : {
				title : "OSLC Delegated Dialogs 3.0",
				href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html",
				authors : [ "Samuel Padgett", "Steve Speicher" ],
				publisher : "OASIS",
			}
		}
	};
</script>
</head>
<body>

	<section id='abstract'>This document outlines a common approach for server to be able to
	publish their capabilities and how clients can discover and use them.</section>
			
	<section id='sotd'><em>Early editor's working draft: organization and content will change, feedback always welcome.</em></section>
	
	<section id='toc'></section>	
	<hr/>
	
	<section id='intro' class='informative'>
		<h2>Introduction</h2>
		<p>A common problem to building interoperable solutions is having a mechanism for a client to introspect an API or end-point
		to learn if the target application supports a set of capabilities.  Sometimes the client applications may provide limited
		or no features based on what is discovered.  An example of discover needs includes a person using a quality management tool 
		that wants to be able to record a bug in a bug tracking tool.  The integration from the quality management tool will want to
		be able to do a number of things on behalf of the user and provide an optional integrated experience to streamline the
		users workflow.  Therefore the discovery needs include: authenticating, knowing that the target tool is capable of 
		receiving creation requests for bugs, whether it can be handled via a user interface, what fields are required and
		types of data, and also if the bug record can be prefilled with some data from the test currently being executed.</p>
		<p></p>
	</section>

	<section id="terms">
		<h1>Terminology</h1>
		<p>Terminology is based on OSLC Core Overview [[OSLCCore3]], W3C Linked Data Platform [[LDP]], W3C's
			Architecture of the World Wide Web [[WEBARCH]],  Hyper-text
			Transfer Protocol [[HTTP11]].</p>
		<dl>
			<dt class='loc-heading'><dfn>Discovery</dfn></dt>
			<dd>The act of an OSLC Client to be able to determine if an OSLC Server supports a given capability.  It also applies
			to applications that do not operate as a client or server, for example running within a web browser.</dd>
		</dl>
	</section>
	
	<section id="conformance">
	<p><em>TODO: needed for public review version of standards-track specifications, more details 
	in <a href="http://docs.oasis-open.org/templates/TCHandbook/ConformanceGuidelines.html#_Toc170119664">TC Handbook</a>.
	Some examples: <a href="https://dvcs.w3.org/hg/ldpwg/raw-file/default/ldp.html#conformance">LDP</a>, 
	<a href="http://docs.oasis-open.org/ubl/os-UBL-2.1/UBL-2.1.html#S-CONFORMANCE">UBL</a></em></p>
	</section>

	<section class='informative'>
		<h2>Motivation</h2>
		<p>Some key usage scenarios that motivate a number of requirements for discovery.</p>
		<p>Determine if the target tool supports:</p>
		<ul>
			<li>a certain authentication model (OAuth2, OpenID Connect, HTTP Basic)</li>
			<li>creating bug records (resources of a given kind)</li>
			<li>user interface previews</li>
			<li>user interface dialogs for creating or selecting bugs (resources of given types)</li>
			<li>prefilling dialogs</li>
			<li>describing the constraints on a bug creation or update request (shapes associated with certain operations)</li>
		</ul>
		<p>Additionally there is motivation to establish a common way for tools to support similar mechanisms so
		that each new capability doesn't introduce a new discovery model.  It is also desired to have capabilities defined, whether
		within a standards development group or proprietary, to be able to leverage a similar approach to discovery.</p>
		<p>The basis for how clients discovery capability should be based on the methods established by [[LDP]] and [[HTTP11]].</p>
		
	</section>
	
	<section id='concepts' class='informative'>
		<h2>Basic Concepts</h2>
		<p>TODO: determine if needed</p>
	</section>

	<section>
		<h2>Discovery Approaches</h2>
		<p></p>
		
		<section id="creation">
			<h2>Checking for creation of a certain type of resource</h2>
			
			<section id="doesCreate"><h2 class="normal">
				The existence of an <code>Accept-Post</code> header on an HTTP response to a given Request-URI will
				indicate that both an HTTP POST is accepted for authorized requests and which content types are support
				in the entity body of an HTTP POST request. See [[LDP]] <a href="http://www.w3.org/TR/ldp/#header-accept-post">
				section about <code>Accept-Post</code></a>.
			</h2></section>
			
			<section id="isLDPC"><h2 class="normal">
				The existence of a <code>Link: &lt;http://www.w3.org/ns/ldp#Container&gt;; rel="type"</code> header on 
				an HTTP response to a given Request-URI will indicate that the resource is a LDP Container. See [[LDP]]
				<a href="http://www.w3.org/TR/ldp/#ldpc-linktypehdr">section about <code>Link</code> header and resource types</a>.
			</h2></section>

			<section id="createsTypes"><h2 class="normal">
				The target URI of a <code>Link: &lt;<em>type-URI</em>&lt;; rel="http://open-services.net/ns/core#creationType"</code> 
				header on an HTTP response to a given Request-URI will indicate the <code><em>type-URI</em></code> 
				(i.e. <code>rdf:type</code>) for the type of resources that SHOULD be able to be created for
				authorized requests against the LDP Container.  Note: since there is always some time between when the
				test is done and when the creation request is sent, and that there may additional server enforced constraints
				on the creation resource representation, there is no guarantee that a future creation request will succeed.
			</h2>
			<div class='note'>TODO: Poll to see if needed a standard predicate for feeding indexes</div>
			
			<pre class='example'>
			Link: &lt;http://open-services.net/ns/cm#Bug&gt;; rel="http://open-services.net/ns/core#creationType",
			      &lt;http://example.com/vocab#Feature&gt;; rel="http://open-services.net/ns/core#creationType"
			</pre>
			
			</section>
			
			<section id="isCreateEx" class='informative'><h2 class='normal'>Example</h2>
			<p>Complete example highlighting that POST is supported, which content types are supported on POST, 
			the fact that the resource is a LDP Container and it advertises support for creating two types of
			resources.  Here showing the request (OPTIONS) and then the response:</p>
			<pre class='example'>
			OPTIONS /bugs/ HTTP/1.1
			Host: example.come
			</pre>
			<pre class='example'>
			HTTP/1.1 204 No Content
			Date: Thu, 12 Jun 2014 18:26:59 GMT
			Allow: POST,GET,OPTIONS,HEAD,PUT
			Accept-Post: text/turtle, application/ld+json
			Link: &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type",
				  &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type"
			Link: &lt;http://open-services.net/ns/cm#Bug&gt;; rel="http://open-services.net/ns/core#creationType",
			      &lt;http://example.com/vocab#Feature&gt;; rel="http://open-services.net/ns/core#creationType"
			</pre>
			</section>
		</section>
		
		<section id="creationShapes"><h2>Checking for constraints for creation</h2>
		    <p>In addition to the ways one can discover if a given OSLC Server supports creation of resources
		    and for which types, it is helpful to understand if there are server-enforced constraints on
		    the resource representation.</p>
		    
			<section id="createsWithShapes"><h2 class="normal">
				The target URI of a <code>Link: &lt;<em>constraints-URI</em>&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy"</code> 
				header on an HTTP response to a given Request-URI will indicate the <code><em>constraint-URI</em></code> 
				for the resources that SHOULD be able to be created for
				authorized requests against the LDP Container.  The resource defined by <code><em>constraint-URI</em></code>
				SHOULD be an OSLC Resource Shape but MAY be some variant or other constraint document.
				
				See [[LDP]]
				<a href="http://www.w3.org/TR/ldp/#ldpr-gen-pubclireqs">section about server published constraints</a>.
			</h2>
			<div class='note'>TODO Poll to see if needed a standard predicate for feeding indexes</div>
			<div class='note'>TODO Should we introduce a shape-specific relationship type, thinking yes.</div>
			
			<pre class='example'>
			Link: &lt;http://example.com/shapes/bug&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy"
			</pre>
			</section>
		</section>
			
		<section id="uiPreview"><h2>User interface resource previews</h2>
			<p>See [[ResourcePreview]] sections on discovery using 
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html#linkHeader">the <code>Link</code> header</a> or 
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html#prefer">the <code>Prefer</code> header</a>.
		</section>

		<section id="dialogs"><h2>User interface dialogs</h2>
			<p>See [[Dialogs]] sections on discovery
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html#linkHeader">the <code>Link</code> header</a> or 
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html#prefer">the <code>Prefer</code> header</a>.
			</p>
		
		
		<div class=note><strong>TODO: Move this content to [[Dialogs]] and update links</strong>
<p>Here are the list of things to do in dialogs spec:</p>
<ul>
<li>define link relation for creationDialog and selectionDialog</li>
<li>define usage of Prefer preference</li>
<li>define Dialog resource and properties</li>
<li>define how to use <code>&lt;dialog-uri&gt; oslc:resourceShape &lt;shape-uri&gt;</code> to link dialog->shape</li>
</ul>

			<p>The following example shows a container that supports creation and selection dialogs:</p>
			<pre class='example'>
			OPTIONS /bugs/ HTTP/1.1
			Host: example.com
			</pre>
			<pre class='example'>
			HTTP/1.1 204 No Content
			Date: Thu, 12 Jun 2014 18:26:59 GMT
			Allow: POST,GET,OPTIONS,HEAD,PUT
			Accept-Post: text/turtle, application/ld+json
			Link: &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type",
				  &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type"
			Link: &lt;http://example.com/dialogs/bugCreator&gt;; rel="http://open-services.net/ns/core#creationDialog"
			Link: &lt;http://example.com/dialogs/bugSelector&gt;; rel="http://open-services.net/ns/core#selectionDialog"
			</pre>

			<p>The following example shows a container that supports creation and selection dialogs:</p>
			<pre class='example'>
			GET /bugs/ HTTP/1.1
			Host: example.com
			Accept: text/turtle
			Prefer: return=representation; 
			        include="http://open-services.net/ns/core#PreferDialog http://www.w3.org/ns/ldp#PreferMinimalContainer"
			</pre>
			<pre class='example'>
			HTTP/1.1 200 OK
			Content-Type: text/turtle
			ETag: "_87e52ce291112"
			Link: &lt;http://www.w3.org/ns/ldp#DirectContainer&gt;; rel="type",
				  &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type"
			Accept-Post: text/turtle, application/ld+json
			Allow: POST,GET,OPTIONS,HEAD
			Preference-Applied: return=representation
			Transfer-Encoding: chunked

			@prefix dcterms: &lt;http://purl.org/dc/terms/&gt;.
			@prefix ldp: &lt;http://www.w3.org/ns/ldp#&gt;.
			@prefix oslc: &lt;http://open-services.net/ns/core#&gt;
			@prefix ex: &lt;http://example.com/vocab#&gt;.

			&lt;http://example.com/bugs/&gt;
			   a ldp:DirectContainer;
			   dcterms:title "List of all records of bugs";
			   ldp:membershipResource &lt;http://example.com/bugs/&gt;;
			   ldp:hasMemberRelation ex:bug;
			   ldp:insertedContentRelation ldp:MemberSubject;
			   oslc:creationDialog &lt;#newDialog&gt;;
			   oslc:selectionDialog &lt;#pickerDialog&gt;.
			   
			&lt;#newDialog&gt;
			   a oslc:Dialog;
			   dcterms:title "A new bug dialog";
			   oslc:label "New bug";
			   oslc:dialog &lt;http://example.com/dialogs/bugCreator?view=html&gt;;
			   oslc:hintHeight "400 em";
			   oslc:hintWidth "400 em";
			   oslc:resourceType &lt;http://open-services.net/ns/cm#Bug&gt;.

			&lt;#pickeRDialog&gt;
			   a oslc:Dialog;
			   dcterms:title "A bug selection dialog";
			   oslc:label "Select existing bug";
			   oslc:dialog &lt;http://example.com/dialogs/bugSelector?view=html&gt;;
			   oslc:hintHeight "400 em";
			   oslc:hintWidth "400 em";
			   oslc:resourceType &lt;http://open-services.net/ns/cm#Bug&gt;.
			</pre>
			
			
		<section>
			<h2>Dialog Shape</h2>
			<p>Descriptor of the dialogs</p>
		
			<div title='RDF Shape for Dialog' 
				data-include='./Dialog-shape.ttl' 
				data-oninclude='shapeToSpec' 
				data-include-sync='true' 
				data-include-replace='true' 
				data-include-format='html'></div>
			
		</section>
		
		</div>
		</section>
		
		<section id="authMethods"><h2 class='normal'>Checking authentication options</h2>
		
			<div class='note'>TODO: What do we need to say here?  Just articulate that we use HTTP-REST, therefore
			various web-based authentication mechanisms exist.  Here are some to consider: OAuth2, HTTP Basic Auth, ...
			Perhaps best just to defer to a "auth" spec, whenever it is created.</div>
		
		</section>
<!-- 			
			<div class="issue-open"><div class="issue-title">Issue title (open)</div>Some text about this issue</div>
			<div class="issue-closed"><div class="issue-title">Issue title (closed)</div>Some text about this issue</div>
			<div class="issue-pending"><div class="issue-title">Issue title (pending)</div>Some text about this issue</div>
 -->
		
		<section>
			<h2>Shape</h2>
			<p><em>No shapes are defined in this specification.</em></p>

		</section>		
	</section>
	
	<section class='appendix'>
		<h2>RDF Vocabulary</h2>
		<p class=note>TODO: still evolving</p>
		
		<div title='RDF Vocabulary for Discovery' 
			data-include='./discovery-vocab.ttl' 
			data-oninclude='vocabToSpec' 
			data-include-sync='true' 
			data-include-replace='true' 
			data-include-format='html'></div>		
		
	</section>

	<section class='appendix informative'>
		<h2>Acknowledgements</h2>
		<p><em>Call all key contributors, reviewers or general groups as needed.</em></p>
		<p>Many thanks to Tim Berners-Lee for inventing the Web.</p>
	</section>

	<section class='appendix informative'>
		<h2>ToDo List - items to complete this document</h2>
		<ul>
		<li>Build outline for capability section</li>
		<li>Validate scenarios in motivation section</li>
		<li>When to use HTTP headers vs properties in content</li>
		</ul>
	</section>
	
	<section class='appendix informative'>
		<h2>Change History</h2>
		<p>The change history is up to the editors to insert a brief summary of
changes, ordered by most recent changes first and with heading from which
public draft it has been changed from.</p>

<!-- 
	<section>	
		<h2>Detailed history</h2>
<!-- <blockquote><em><a href="http://sspeiche.github.io/respec/examples/oslc/template-spec.html">Working Draft</a></em></blockquote> -->
<!-- 
		<ul>
			<li>2014-10-20 - Provide history, prefer autogen from SCM tool...conclude with initials (SS)</li>
		</ul>
	</section>-->
	</section>

</body>
</html>
