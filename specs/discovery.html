<!DOCTYPE html>
<html> 
<head>
<title>OSLC Discovery 3.0</title>
<meta charset='utf-8'>
<script	src='https://sspeiche.github.io/respec/builds/oasis/respec-oasis-common.js' async class='remove'></script>
<script  type="text/javascript" >
    var respecConfig = {
        // specification status (WD, CSD, CSPRD, CS, COS, OS, Errata, CND, CNPRD, CN). If in doubt use WD.
        // See http://docs.oasis-open.org/specGuidelines/ndr/namingDirectives.html#stage
        specStatus : "WD",

        // Only include h1 and h2 level
        maxTocLevel: 2,

        shortName : "oslc-discovery",

        // if your specification has a subtitle that goes below the main
        // formal title, define it here
        // subtitle   :  "Committee Specification Draft 01",

        // if you wish the publication date to be other than the last modification, set this
        // publishDate:  "2009-08-06",

        // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
        // and its maturity status
        // previousPublishDate:  "1977-03-15",
        // previousMaturity:  "WD",

        // if there a publicly available Editor's Draft, this is the link
        edDraftURI:           "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/discovery.html",

        // if this is a LCWD, uncomment and set the end of its review period
        // lcEnd: "2009-08-05",

        // includePermalinks: true,

		chairs : [ {
			name : "Jim Amsden",
			url : "http://www.ibm.com/"
		}, {
			name : "Martin Sarabura",
			url : "http://www.ptc.com"
		} ],
		editors : [ {
			name : "Jim Amsden",
			mailto : "jamsden@us.ibm.com",
			company : "IBM",
			companyURL : "http://www.ibm.com/"
		} ],
        wg : "OASIS OSLC Lifecycle Integration Core (OSLC Core) TC",
        wgURI : "https://www.oasis-open.org/apps/org/workgroup/oslc-core/",
        namespaces : [ {
                href : "http://open-services.net/ns/core#",
                prefix : "oslc"
        } ],
        wgPublicList : "oslc-core-comments",

        localBiblio : {
            "OSLCCore3" : {
                title : "OSLC Core 3.0",
                href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/oslc-core.html",
                authors : [ "Steve Speicher" ],
                publisher : "OASIS",
            },
            "ResourcePreview" : {
                title : "OSLC Resource Preview 3.0",
                href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html",
                authors : [ "Samuel Padgett", "Steve Speicher" ],
                publisher : "OASIS",
            },
            "Dialogs" : {
                title : "OSLC Delegated Dialogs 3.0",
                href : "http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html",
                authors : [ "Samuel Padgett", "Steve Speicher" ],
                publisher : "OASIS",
            },
            "OSLCShapes2" : {
                title : "OSLC Resource Shapes 2.0",
                href : "http://open-services.net/bin/view/Main/OSLCCoreSpecAppendixA#oslc_ResourceShape_Resource",
                authors : [ "Dave Johnson" ],
                publisher : "open-services.net",
            },
            "OpenIDConnect" : {
                title : "OpenID Connect",
                href : "http://openid.net/connect/",
                publisher : "openid.net",
            }
        }
    };
</script>
<style type="text/css">
.normalText {
    color: black;
    font-family: inherit;
    font-size: 100%;
    font-weight: normal;
}

code {
    font-weight:bold;
}

.rfc2119 {
    font-weight:bold;
}

dd {
    padding-top: 5px;
    padding-bottom: 10px;
}
</style>
</head>
<body>

	<section id='abstract'>This document outlines a common approach for HTTP/LDP-based server to be able to
	publish their RESTful API capabilities and how clients can discover and use them.</section>

	<section id='sotd'><em>Stable Working Draft: received and incorporated TC feedback.  (Almost) Ready for Public Review.</em></section>

	<section id='toc'></section>
	<hr/>

	<section id='intro' class='informative'>
		<h2>Introduction</h2>
		<p>A common problem with building interoperable solutions is having a mechanism for a client to introspect a server API or end-point
		to learn if the target application supports a set of capabilities.  Client applications would then provide features based on what is discovered.  For example, a person using a quality management tool
		wants to be able to record a bug in a bug tracking tool.  The integration from the quality management tool will want to
		be able to do a number of things on behalf of the user and provide an optional integrated experience to streamline the
		users workflow.  To do this, the quality management tool will need a means of discovering information about the bug tracking tool including: authenticating, knowing that the target tool is capable of
		receiving creation requests for bugs, whether it can be handled via a user interface, what fields are required and
		types of data, and also if the bug record can be pre-filled with some data from the test currently being executed.</p>

		<p>OSLC Discovery 3.0 defines a capability providing client applications a standard way to introspect servers to determine what resource types the server supports, how to preview, select or create instances of those resources, and any constraints on resource creation or update. Discovery capabilities allow clients to determine what capabilities are provided by a server so they can adapt to, and integrate with different servers in support of end user integration scenarios.</p>
	</section>

	<section id="terms">
		<h1>Terminology</h1>
		<p>Terminology is based on OSLC Core Overview [[OSLCCore3]], W3C Linked Data Platform [[LDP]], W3C's
			Architecture of the World Wide Web [[WEBARCH]],  Hyper-text
			Transfer Protocol [[HTTP11]].</p>
		<dl>
			<dt class='loc-heading'><dfn>Discovery</dfn></dt>
			<dd>The act of an OSLC Client to be able to determine if an OSLC Server supports a given capability.  It also applies
			to applications that do not operate as a client or server, for example running within a web browser.</dd>
		</dl>
	</section>

	<section id="conformance">
	</section>

	<section class='informative'>
		<h2>Motivation</h2>
		<p>Management and use of shared information in complex domains such as IT application lifecycle management and systems and software engineering often involve the integration of many data sources supported by tools developed by different vendors on different technical architectures, introduced at different times. Integrating these tools in order to support a wide range of evolving end user scenarios requires flexible and loosely coupled interactions between consumers and providers of this shared information. An important way of achieving this flexibility and loose coupling is to allow clients to incrementally discover the capabilities of any given server, and then adapt to what is discovered in order to maximize end user capabilities. Although a client may not know ahead of time what capabilities a given server might provide, they can know a standard means of discovering those capabilities, and can be developed in a way dynamically adapt to the discovered capabilities.</p>
		<p>Key usage scenarios that motivate a number of requirements for discovery include determining if the target tool supports:</p>
		<ul>
			<li>a certain authentication model (OAuth2, OpenID Connect, HTTPS Basic)</li>
			<li>creating resources with a given type</li>
			<li>user interface previews of a given resource</li>
			<li>user interface dialogs for creating or selecting resources of given types</li>
			<li>prefilling dialogs for resource creation</li>
			<li>describing the constraints on a resource creation or update request (allowable properties or values)</li>
		</ul>
		<p>Additionally there is motivation to establish a common way for tools to support similar mechanisms so
		that each new capability doesn't introduce a new discovery model.  It is also desired to have capabilities defined, whether
		within a standards development group or proprietary, to be able to leverage a similar approach to discovery.</p>
		<p>Security concerns are also important when managing shared information across organization and tool boundaries. The specific security needs of any application however are difficult to predict. Experience has shown that this variability results in complexity for tool integration and therefore some standard mechanism for authentication discovery is highly desired.</p>
		<p>The basis for how clients discover capabilities should be based on the methods established by [[LDP]] and [[HTTP11]].</p>
		
	</section>

<!--
	<section id='concepts' class='informative'>
		<h2>Basic Concepts</h2>
		<p>TODO: determine if needed</p>
	</section>   -->

	<section id="discoveryCapabilities">
		<h2>Discovery Capabilities</h2>
		<p>There are various approaches for how specifications define and advertise their capabilities, and
		how clients can efficiently discover what is available.  The following sections
		will provide guidance on approaches that should be used.</p>

		<section id="differentApproaches">
			<h2>Choosing most effective methods</h2>

			<section id="discOptions"><h2 class="normalText">
				Clients SHOULD use <code>HTTP OPTIONS</code> to fetch various headers and other configuration
				information that MAY be exposed in the response content body.
			</h2></section>

			<section id="discHeaders"><h2 class="normalText">
				Servers SHOULD minimize the use of HTTP response headers on various HTTP operations as to
				avoid unnecessary additional response content. This is also to avoid the complexity
				on server implementations that would be needed to provide such additional content.
			</h2></section>

			<section id="discContent"><h2 class="normalText">
				Servers SHOULD only use LDPR representations for additional discovery details that are not already available
				 within HTTP response headers. It is also useful for scenarios where it would be valuable to have the discovery
				 data readily available for purposes such as query.
			</h2></section>
		</section>

		<section id="creation">
			<h2>Resource Creation Discovery</h2>

			<section id="doesCreate"><h2 class="normalText">
				The existence of an <code>Accept-Post</code> header on an HTTP response to a given Request-URI indicates i) that an HTTP POST will be accepted for authorized requests and ii) what types of content are supported in the entity body of the HTTP POST request. Restating of [[LDP]] <a href="http://www.w3.org/TR/ldp/#header-accept-post"> conformance clause about <code>Accept-Post</code></a>.
			</h2></section>

			<section id="isLDPC"><h2 class="normalText">
				The existence of a <code>Link: &lt;http://www.w3.org/ns/ldp#Container&gt;; rel="type"</code> header on
				an HTTP response to a given Request-URI will indicate that the resource is a LDP Container. Restating
				conformance clause for [[LDP]]
				<a href="http://www.w3.org/TR/ldp/#ldpc-linktypehdr"><code>Link</code> header and resource types</a>.
			</h2></section>

			<section id="createsTypes"><h2 class="normalText">
				Servers SHOULD include the target URI of a <code>Link: &lt;type-URI&gt;; rel="http://open-services.net/ns/core#creationType"</code>
				header on an HTTP response to a given Request-URI to indicate the type-URI (i.e.<code>rdf:type</code>) for the type of resources
				that can be created by the LDP Container. Note: since there is always some time between when the
				test is done and when the creation request is sent, and that there may be additional server enforced constraints
				on the creation resource representation, there is no guarantee that a future creation request will succeed.</h2>
			</section>

			<section id="createTypesPred"><h2 class="normalText">
				Servers MAY include a RDF triple in resource response body of the form: <code>&lt;container-URI&gt; oslc:creationType &lt;type-URI&gt;</code>.</h2>
				Clients SHOULD use the predicate <code>oslc:creationType</code> when converting HTTP response headers for the same Link-relation type, into
				an RDF triple.	This is to assist with scenarios where client applications may want to use the RDF representation in a query
				to locate LDP Containers that can be used to create the same resource types.
			</section>

			<p>The following example is an OPTIONS request on the /bugs/ resource.</p>
			<pre class='example'>
			OPTIONS /bugs/ HTTP/1.1
			Host: example.com
			</pre>
			<p> The response to this example request indicates that POST is supported for creating resources while the Accept-Post header indicates Turtle and JSON-LD content types are supported. The type link header indicates the resource is an LDP BasicContainer. The creationType link headers indicate which resource types are supported on POST. In this case the LDP Container advertises support for creating two types of	resources: Bug and Feature. POSTing an entity request body that is not one of these types would result in an error.</p>
			<pre class='example'>
			HTTP/1.1 204 No Content
			Date: Thu, 12 Jun 2014 18:26:59 GMT
			Allow: POST,GET,OPTIONS,HEAD,PUT
			Accept-Post: text/turtle, application/ld+json
			Link: &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type",
				  &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type"
			Link: &lt;http://open-services.net/ns/cm#Bug&gt;; rel="http://open-services.net/ns/core#creationType",
			      &lt;http://example.com/vocab#Feature&gt;; rel="http://open-services.net/ns/core#creationType"
			</pre>
		</section>

		<section id="creationShapes"><h2>Resource Creation and Update Constraints Discovery</h2>
		    <p>In addition to the ways one can discover if a given OSLC Server supports creation of resources
		    and for which types, it is helpful to understand if there are server-enforced constraints on
		    the resource representation.</p>

			<section id="createsWithShapes"><h2 class="normalText">
				Servers SHOULD include the target URI of a <code>Link: &lt;<em>constraints-URI</em>&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy"</code>
				header on an HTTP response to a given Request-URI to indicate the <code><em>constraint-URI</em></code>
				of a resource that defines the constraints about the to-be created resource representation against a LDP Container.
				The resource defined by <code><em>constraint-URI</em></code> is RECOMMENDED to be a machine-readable representation
				such as OSLC Resource Shape but MAY be some variant or other constraint document [[OSLCShapes2]].
				See [[LDP]]	<a href="http://www.w3.org/TR/ldp/#ldpr-gen-pubclireqs">section about server published constraints</a>.
			</h2>

				<pre class='example'>
				Link: &lt;http://example.com/shapes/bug&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy"
				</pre>
				<p>The link header in the example above would be returned on a POST or PUT to a resource of type <code>&lt;http://open-services.net/ns/cm#Bug&gt;</code> that violated the referenced constraint.</p>
			</section>

			<section id="createWithShapesPred"><h2 class="normalText">
				Servers MAY include a RDF triple in resource response body of the form:	<code>&lt;container-URI&gt; ldp:constrainedBy &lt;shape-URI&gt;</code>.</h2>
				Clients SHOULD use the predicate <code>ldp:constrainedBy</code> when converting HTTP response headers for the same Link-relation type, into
				an RDF triple.	This is to assist with scenarios where client applications may want to use the RDF representation in a query
				to locate LDP Containers that are constraints by the same resource.
			</section>
		</section>

		<section id="uiPreview"><h2>Resource User Interface Preview Discovery</h2>
			<p>See [[ResourcePreview]] sections on discovery using
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html#linkHeader">the <code>Link</code> header</a> or
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/resource-preview.html#prefer">the <code>Prefer</code> header</a>.</p>
		</section>

		<section id="dialogs"><h2>Resource User Interface Delegated Dialogs Discovery</h2>
			<p>See [[Dialogs]] sections on discovery
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html#discovery_link">the <code>Link</code> header</a> or
			<a href="http://tools.oasis-open.org/version-control/browse/wsvn/oslc-core/specs/dialogs-v3.html#discovery_prefer">the <code>Prefer</code> header</a>.
			</p>
		</section>

		<section id="authDiscovery"><h2>Authentication Discovery</h2>
			<section id="createWithShapesPred"><h2 class="normalText">
				Clients SHOULD determine what authentication schemes a server supports by parsing and processing the challenge sent by the target server in response to a request for a protected resource.
			</h2></section>
			
		</section>
<!--
			<div class="issue-open"><div class="issue-title">Issue title (open)</div>Some text about this issue</div>
			<div class="issue-closed"><div class="issue-title">Issue title (closed)</div>Some text about this issue</div>
			<div class="issue-pending"><div class="issue-title">Issue title (pending)</div>Some text about this issue</div>
 -->

		<section>
			<h2>Shape</h2>
			<p><em>No shapes are defined in this specification.</em></p>

		</section>
	</section>

	<section class='appendix'>
		<h2>RDF Vocabulary</h2>

		<div title='RDF Vocabulary for Discovery'
			data-include='vocab/discovery-vocab.ttl'
			data-oninclude='vocabToSpec'
			data-include-sync='true'
			data-include-replace='true'
			data-include-format='html'></div>

	</section>

	<section class='appendix informative'>
		<h2>Acknowledgements</h2>
		<p>Many thanks to the various OASIS Core TC members and other key contributors and reviewers.</p>
	</section>

	<section class='appendix informative'>
		<h2>Change History</h2>
		<p>The change history is up to the editors to insert a brief summary of
changes, ordered by most recent changes first and with heading from which
public draft it has been changed from.</p>

<!--
	<section>
		<h2>Detailed history</h2>
<!-- <blockquote><em><a href="http://sspeiche.github.io/respec/examples/oslc/template-spec.html">Working Draft</a></em></blockquote> -->
<!--
		<ul>
			<li>2014-10-20 - Provide history, prefer autogen from SCM tool...conclude with initials (SS)</li>
		</ul>
	</section>-->
	</section>

</body>
</html>
