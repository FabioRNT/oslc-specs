<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
<meta charset='utf-8' />
<head>
<title>OSLC Core Version 3.0. Part 8: Query</title>
<link rel="stylesheet" type="text/css" href="../styles/oslc-styles.css" />
<link rel="stylesheet" type="text/css" href="../styles/table-styles.css" />
<link rel="stylesheet" type="text/css" href="../styles/definition-styles.css" />
<script src='https://ndjc.github.io/respec/builds/oasis/respec-oasis-common.js' async class='remove'></script>
<script class='remove'>
  var respecConfig = {
    // specification status (WD, CSD, CSPRD, CS, COS, OS, Errata, CND, CNPRD, CN).
    // If in doubt use WD.
    // See http://docs.oasis-open.org/specGuidelines/ndr/namingDirectives.html#stage
    specStatus : "WD",

    // the specification's short name with version but no dots
    shortName : "oslc-core",

    // if your specification has a subtitle that goes below the main
    // formal title, define it here
    // subtitle   :  "Committee Specification Draft 02",

    // the document's citation label
    citationLabel: "OSLC-Core-3.0",

    // OSLC version number for the spec, and the revision level of the document within its stage
    oslcVersion: "3.0",
    revision: "02",

    // if you wish the publication date to be other than the last modification, set this
    publishDate:  "2017-12-18",

    // if the specification's copyright date is a range of years, specify the start date here:
    // copyrightStart: "2005"

    // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
    // and its maturity status
    // previousPublishDate:  "1977-03-15",
    // previousMaturity:  "WD",

    // Only include h1 and h2 levels in the table of contents
    maxTocLevel: 3,

    // if there a publicly available Editor's Draft, this is the link
    //edDraftURI : "https://tools.oasis-open.org/version-control/svn/oslc-core/trunk/specs/oslc-query.html",
    thisVersion : "https://tools.oasis-open.org/version-control/svn/oslc-core/trunk/specs/oslc-query.html",
    latestVersion : "http://docs.oasis-open.org/oslc-core/oslc-core/v3.0/oslc-core-v3.0-part8-oslc-query.html",
    prevED : "http://open-services.net/bin/view/Main/OSLCCoreSpecQuery",

    // Chairs and editors, add as many as you like: you must have at least one editor.
    // Only "name" is required, but the other fields are recommended.
    editors:  [ {
        name:        "Jim Amsden",
        mailto :     "jamsden@us.ibm.com",
        company :    "IBM",
        companyURL : "http://www.ibm.com"
      },
      {
        name:        "David Honey",
        mailto :     "david_honey@persistent.com",
        company :    "Persistent Systems Ltd",
        companyURL : "http://persistent.com"
      }
    ],
    chairs : [ {
      name : "Jim Amsden",
      mailto : "jamsden@us.ibm.com",
      company: "IBM",
      companyURL: "http://www.ibm.com/"
    }, {
      name : "Martin Sarabura",
      mailto: "msarabura@ptc.com",
      company: "PTC",
      companyURL: "http://www.ptc.com"
    } ],

    // name of the TC
    wg : "OASIS OSLC Lifecycle Integration Core (OSLC Core) TC",
    wgShortName:  "oslc-core",

    // URI of the public TC page
    wgURI : "https://www.oasis-open.org/committees/oslc-core/",

    // name (without the @lists.oasis-open.org) of the public mailing to which comments are due
    wgPublicList: "oslc-core-comment",

    namespaces : [ {
            href : "http://open-services.net/ns/core#",
            prefix : "oslc"
    } ],

    // Other parts of multi-part spec
    additionalArtifacts : [
      { title: "OSLC Core Version 3.0. Part 1: Overview", href: "oslc-core.html" },
      { title: "OSLC Core Version 3.0. Part 2: Discovery", href: "discovery.html" },
      { title: "OSLC Core Version 3.0. Part 3: Resource Preview", href: "resource-preview.html" },
      { title: "OSLC Core Version 3.0. Part 4: Delegated Dialogs", href: "dialogs.html" },
      { title: "OSLC Core Version 3.0. Part 5: Attachments", href: "attachments.html" },
      { title: "OSLC Core Version 3.0. Part 6: Resource Shape", href: "resource-shape.html" },
      { title: "OSLC Core Version 3.0. Part 7: Vocabulary", href: "core-vocab.html" },
      { title: "OSLC Core Version 3.0. Part 8: Query (this document)", href: "oslc-query.html" }
	  ],


    // Related work
    // relatedWork : [
    //    { title: "Some title", href: "http://example.com/relatedDocument.html" },
    //    ],
    // supersedes : [
    //    { title: "Some title", href: "http://example.com/supercededDocument.html" },
    //    ],

    localBiblio : {
        "OSLCCore2" : {
            title:    "OSLC Core 2.0",
            href:     "http://open-services.net/bin/view/Main/OslcCoreSpecification",
            authors:  ["S. Speicher", "D. Johnson"],
            status:   "Finalized",
            publisher:  "http://open-services.net",
        },
        "OSLCQuery2" : {
            title:    "Open Services for Lifecycle Collaboration Core Specification Version 2.0 Query Syntax",
            href:     "http://open-services.net/bin/view/Main/OSLCCoreSpecQuery",
            authors:  ["Arthur Ryman"],
            status:   "Finalized",
            publisher:  "http://open-services.net",
        },
        "OSLCCore3": {
            title:     "OSLC Core 3.0",
            href:      "http://tools.oasis-open.org/version-control/svn/oslc-core/specs/oslc-core-v3.html",
            authors:   [ "Steve Speicher", "Jim Amsden" ],
            publisher: "OASIS",
        },
        "OSLCCoreVocab" : {
            title : "OSLC Core Vocabulary",
            href : "http://docs.oasis-open.org/oslc-core/oslc-core/v3.0/oslc-core-v3.0-part7-core-vocabulary.html",
            authors : [ "Jim Amsden", "S. Padgett", "S. Speicher" ],
            status:   "Working Draft",
            publisher : "OASIS",
        },
        "OSLCResourcePreview": {
            title:    "OSLC Core 3.0 Resource Preview",
            href:     "http://docs.oasis-open.org/oslc-core/oslc-core/v3.0/oslc-core-v3.0-part3-resource-preview.html",
            authors:  ["Jim Amsden", "S. Speicher"],
            status:   "Draft",
            publisher:  "OASIS",
        },
        "OSLCTRS3": {
            title:     "Tracked Resource Set Specification Version 3.0",
            href:      "http://tools.oasis-open.org/version-control/svn/oslc-core/specs/tracked-resource-set.html",
            authors:   [ "Jim Amsden", "Nicholas Crossley", "Vivek Garg" ],
            status:    "Committee Specification Draft",
            publisher: "http://open-services.net",
        },
        "OSLCQuery" : {
            title:    "OSLC Core 2.0 Query Capability",
            href:     "http://open-services.net/bin/view/Main/OslcCoreSpecification#Query_Capabilities",
            authors:  ["S. Speicher", "D. Johnson"],
            status:   "Finalized",
            publisher:  "http://open-services.net",
        },
        "LDPPaging": {
            title:    "Linked Data Platform Paging 1.0",
            href:     "https://dvcs.w3.org/hg/ldpwg/raw-file/default/ldp-paging.html",
            authors:  ["S. Speicher", "J. Arwe", "A. Malhotra"],
            status:   "Working Group Note",
            publisher:  "http://www.w3c.org",
        },
        "LDPPatch" : {
            title : "Linked Data Patch Format",
            href : "http://www.w3.org/TR/ldpatch/",
            status : "Working Group Note",
            publisher : "http://www.w3.org/",
        },
        "OSLCShape": {
            title : "OSLC Resource Shape 3.0",
            href : "https://tools.oasis-open.org/version-control/svn/oslc-core/trunk/specs/resource-shape.html",
            authors : [ "Arthur Ryman", "Jim Amsden" ],
            publisher : "OASIS",
        },
        "OpenIDConnect" : {
            title : "OpenID Connect",
            href : "http://openid.net/connect/",
            publisher : "openid.net",
        },
        "OSLCCM": {
            title:    "Open Services for Lifecycle Collaboration Change Management Specification Version 2.0",
            href:     "http://open-services.net/bin/view/Main/CmSpecificationV2",
            authors:  ["Steve Speicher"],
            status:   "Final",
            publisher:  "http://open-services.net",
        },
        "EBNF": {
        	title:		"Extended Backus–Naur form",
        	href:		"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form",
        	publisher:	"https://en.wikipedia.org"
        },
        "FULLTEXT-SEARCH": {
        	title:		"Full-text search",
        	href:		"http://en.wikipedia.org/wiki/Full_text_search",
        	publisher:	"https://en.wikipedia.org"
        },
        "ISO8601": {
        	title:		"ISO 8601",
        	href:		"http://en.wikipedia.org/wiki/ISO_8601",
        	publisher:	"https://en.wikipedia.org"
        },
    },
};
</script>

<style type="text/css">
table, thead, tr, td {
padding: 5px;
border-width: 1px;
border-spacing: 0px;
border-style: solid;
border-collapse: collapse;
}

td { min-width: 100px; }
<style type="text/css">
.normalText {
    color: black;
    font-family: inherit;
    font-size: 100%;
    font-weight: normal;
}

code {
    font-weight:bold;
}

.rfc2119 {
    font-weight:bold;
}

dd {
    padding-top: 5px;
    padding-bottom: 10px;
}

code.escape {
	font-style: italic;
}

code.noescape {
	font-style: normal;
	color: rgb(0, 0, 0);
	font-weight: normal;
}

</style>
</head>

<body>
<section id='abstract'>
  <p></p>
</section>

<section id='toc'></section>
<hr />

<section id='sotd'></section>

<section id='intro' class='informative'>
  <h2>Introduction</h2>
  <p></p>

  <section id='terminology' class='informative'>
    <h3>Terminology</h3>
    <p>Terminology is based on OSLC Core Overview [[OSLCCore3]],
      W3C Linked Data Platform [[LDP]],
      W3C's Architecture of the World Wide Web [[WEBARCH]],
      and Hyper-text Transfer Protocol [[HTTP11]].</p>
    <dl class="spaced">
      <dt><dfn>Term1</dfn></dt>
      <dd>Definition 1.</dd>

      <dt><dfn>Term2</dfn></dt>
      <dd>Definition 2.</dd>
    </dl>
    <div style="margin-left: 2em">
		<font color="red">[David]<br>
			Are there any specific terms required here?
		</font><br><br>
	</div>
  </section>

  <section id='references'><h3>References</h3></section>
  <section id='conventions'></section>
</section>



<section class='informative'>
  <h2>Motivation</h2>
		OSLC servers will often manage large amounts of potentially complex link-data entities. Practical use of this information will 
		require some query capability that minimally supports selection of matching elements, filtering of desired properties and ordering. 
		Ideally OSLC Core would rely on existing standard query services such as [[RDF-SPARQL-QUERY]] that may be integrated with [[LDP]]. 
		The Linked Data Query Language Community Group is currently working on a Query Language for [[LDP]]. However, the reality is that 
		many OSLC servers are adapters built on existing data management capabilities that are not built on an RDF foundation and do not 
		provide SPARQL endpoints for query. In order to address the need for standard query capability to enable integration, [[OSLCCore2]] 
		introduced a Query Capability and a Query Syntax that were intended to be simple enough that they could be implemented on a 
		wide range of existing server architectures and persistence technologies. In practice this has proven to be more difficult than 
		anticipated:
		<ul>
			<li>The OSLC Query 2.0 specification did not describe how its capabilities could be implemented incrementally or distinguish
				between core capabilities that might be expected of every implementation and those that might be optional and implemented
				by only some implementations. This made the burden of implementation much higher than desired.</li>
			<li>The OSLC Query 2.0 specification required strict adherence to SPARQL semantics for relational operators and
				property comparisons. Most implementations based on a standard relational database could only satisfy that requirement
				by maintaining RDF datasets and using SPARQL on them. Few existing implementations did this because it was overly
				burdensome, resulting in most implementations being non-conformant.
		</ul>
		
		The OSLC Query 3.0 specification addresses these concerns by:
		<ul>
			<li>Describing capabilities that are optional and might be omitted, or developed incrementally
				as a requirement for them arose.</li>
			<li>Taking a more persistence-agnostic approach that does not require or assume implementations use
				any particular database or storage implementations, or require the use of SPARQL.</li>
			<li>Categorizing comparison semantics for properties as MUST or MAY so that it is easier to
				implement a core set of capabilities on any server architecture, and then leaving the
				remainder as optional and/or implementation dependent.</li>
		</ul>
		
</section>



<section id='concepts' class='informative'>
	<h2>Basic Concepts<br></h2>
  
	<div style="margin-left: 2em">
		<font color="red">[David]<br>
			This was missing content before. This is just a first draft that needs to be reviewed. I particularly wanted to
			mention that there were two capabilities (property based query, full-text search) and not mandate that <b>both</b> were needed.
			This is an attempt to allow implementations to adopt OSLC query incrementally and not be burdened with everything.
		</font><br><br>
	</div>
  
	OSLC Query provides a mechanism for a client to query or search for resources of some RDF type by performing a <code>GET</code> 
	or <code>POST</code> on a <i>query base</i> URI.
	Clients may discover such query base URIs from a <code>oslc:queryCapability</code> declared in an OSLC service.
	The response to a successful query is a response body that includes the RDF of a <i>query result container</i> that references the member
	resources found by the query, and optionally contains properties of each member resource.

	<p>Two separate capabilities may be provided:</p>
	<ul>
		<li>A query based on an optional query expression consisting of at least one property, comparison operator, and value.
     		The query result container only references resources whose properties match the specified query expression.
     		This is analogous to queries specified by SQL or SPARQL.</li>
     	<li>A full-text search based on one more search terms [[FULLTEXT-SEARCH]]. The query result container only references resources
     	 	that have any text-based properties contain one or more of the search terms.</li>
	</ul>

	Clients may also specify which member properties should be included in the query response.
</section>



<section id="versioning">
	<h2 id="specificationversioningspec_versioning">Specification Versioning</h2>

	<p>This specification follows the specification version guidelines given in [[OSLCCore3]].</p>
</section>



<section id="namespaces">
	<h2>Namespaces</h2>

	In addition to the namespace URIs and namespace prefixes <code>oslc</code>, <code>rdf</code>, <code>rdfs</code>, <code>dcterms</code>,
	<code>ldp</code> and <code>foaf</code> defined in the [[OSLCCore3]], this specification also uses the following namespace prefix definitions:
	<ul>
		<li>oslc_cm : <code>http://open-services.net/ns/cm#</code> [[OSLCCM]]</li>
	</ul>
</section>

<div>
	<font color="red">[David]<br>
		The sections about Graph Patterns, Property Tree Patterns, and Member List Patterns have been intentionally removed.
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-132"><font color="red"><b>[OSLCCORE-132]</b></font></a>.
  	</font><br><br>
</div>

<section>
	<h2>Discovering a Query Capability</h2>
	
	<div style="margin-left: 2em">
		<font color="red">[David]<br>
			This is a new section. There was a gap between OSLC Core and OSLC Query that was non-obvious to me and I misunderstood
			the spec when I originally implemented OSLC Query in the Jazz GCM application. The purpose of the resource shape, the
			usage of <code>oslc:isMemberProperty</code>, and the use of a <code>oslc:valueShape</code> was not obvious and I think
			the spec is improved by explicitly describing how clients discover information about the query capability, and the
			properties that might be included in an <code>oslc.where</code> query expression, and in a <code>oslc.select</code>.
			<a href="https://issues.oasis-open.org/browse/OSLCCORE-102"><font color="red"><b>[OSLCCORE-102]</b></font></a>
		</font><br><br>
	</div>
	
  
	An <code>oslc:Service</code> MAY declare zero, one, or many query capabilities using the <code>oslc:queryCapability</code> property.
	<p>A query capability SHOULD specify exactly one <code>oslc:resourceShape</code> and that shape SHOULD describe the query result
	container.</p>
	
	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		There are two reasons why I think a query capability SHOULD provide a resource shape:
		<ol>
			<li>Using <code>ldp:contains</code> as the member predicate results in a more concise query result container that
				is both backwards compatible with existing 2.0 clients, and conformant with LDPC. See the section on
				<i>Query result containers</i> for details. You can only use this if you
				provide a resource shape and declare <code>ldp:contains</code> as the member predicate.</li>
			<li>Without a resource shape for the query result container, you cannot discover the value shape that
				describes the members.</li>
		</ol>
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-102"><font color="red"><b>[OSLCCORE-102]</b></font></a>
  		</font>
	</div>
	
	<p>The resource shape referenced by <code>oslc:resourceShape</code> MUST declare exactly one OSLC property with
	<code>oslc:isMemberProperty "true"^^xsd:boolean</code>, and that property SHOULD specify exactly one <code>oslc:valueShape</code>
	referencing a resource shape that describes the referenced members of that container.</p>
	
	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		The core and query specs were unclear about this.<br>
		What if a container's resource shape has more than one OSLC property with <code>oslc:isMemberProperty "true"^^xsd:boolean</code>?<br>
		What if each of them references a different value shape?<br>
		The easiest way of avoiding those issues is to state that one and only one membership property should be declared.
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-102"><font color="red"><b>[OSLCCORE-102]</b></font></a>
  		</font><br><br>
	</div>
	
	<pre class="example" title="Query capability resource shape">
@prefix dcterms: &lt;http://purl.org/dc/terms/> .
@prefix oslc: &lt;http://open-services.net/ns/core#> .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#> .

&lt;https://jazz.net/jazz/oslc/context/_Q2fMII8EEd2Q-OW8dr3S5w/trs/shapes/workitems/query> a oslc:ResourceShape ;
	oslc:describes &lt;https://jazz.net/jazz/oslc/contexts/_Q2fMII8EEd2Q-OW8dr3S5w/workitems> ;
	oslc:property &lt;https://jazz.net/jazz/oslc/context/_Q2fMII8EEd2Q-OW8dr3S5w/trs/shapes/workitems/query/property/member> ;
	dcterms:title "Shape of Work Item query resource"^^rdf:XMLLiteral .

&lt;https://jazz.net/jazz/oslc/context/_Q2fMII8EEd2Q-OW8dr3S5w/trs/shapes/workitems/query/property/member>
	a oslc:Property ;
	oslc:isMemberProperty "true"^^xsd:boolean ;
	oslc:name "member" ;
	oslc:occurs oslc:Zero-or-many ;
	oslc:propertyDefinition rdfs:member ;
	oslc:range &lt;http://open-services.net/ns/cm#ChangeRequest> ;
	oslc:readOnly "true"^^xsd:boolean ;
	oslc:representation oslc:Inline ;
	oslc:valueShape &lt;https://jazz.net/jazz/oslc/context/_Q2fMII8EEd2Q-OW8dr3S5w/shapes/workitems/defect> ;
	oslc:valueType oslc:AnyResource ;
	dcterms:title "Work Item Member"^^rdf:XMLLiteral .
	</pre>
	
	<p>The resource shape referenced by <code>oslc:valueShape</code> in the query result container's resource shape
	SHOULD declare the properties that can be used in <code>oslc.select</code> and optionally <code>oslc.where</code>.
	OSLC properties that have a <code>oslc:queryable "false"^^xsd:boolean</code> value cannot be specified in 
	<code>oslc.where</code>. Where a member resource supports nested properties, for example, the <code>foaf:name</code>
	of a <code>dcterms:creator</code>, the member resource shape MAY provide a <code>oslc:valueShape</code>
	for that property. This allows clients to discover both immediate and nested properties that might be used.</p>

	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		The <code>oslc:queryable</code> property is a proposed new boolean property for OSLC Core 3.0 resource shapes.
		It allows a single resource shape to describe properties that may be specified in <code>oslc.select</code>
		and queryable in <code>oslc.where</code>. If that property is absent, the default should be to assume that
		the property is queryable.
  		</font><br><br>
	</div>
	
</section>


<section>
	<h2>Using a Query Capability</h2>
	
	<div style="margin-left: 2em">
		<font color="red">[David]<br>
		This is a new section that provides more explicit information about how to use a query capability.
		This needs reviewing.
  		</font><br><br>
	</div>
	
	Executing a query or search is achieved by executing either of the following:
	<ul>
		<li>a <code>GET</code> on the <i>query base</i> URI of a query capability, with zero, one or
			more query parameters shown in the table below.
			Servers MUST support a GET on the <i>query base</i> URI of a query capability.
			This is the simplest usage, but clients must be careful to avoid constructing URIs
			whose length exceeds server limits. If such a GET URI exceeds 1000 characters,
			clients SHOULD use the POST mechanism described below.</li>
		<li>a <code>POST</code> on the <i>query base</i> URI of a query capability with a
			<code>application/x-www-form-urlencoded</code> body containing zero, one or
			more query parameters shown in the table below.
			Servers SHOULD support <code>POST</code> on the <i>query base</i> URI of a query capability
			to avoid clients having to construct URIs that are too long.</li>
	</ul>
	
	<p>For a successful operation:</p>
	<ul>
		<li>The response status code MUST be <code>200 OK</code> for a non-paged result, or for an OSLC paged result, or 
			<code>303 See Other</code> for an LDPC paged result [[LDP]].</li>
		<li>The response body MUST be RDF that includes a query result container whose subject is the
			query base URI.</li>
	</ul>
	
	For an unsuccessful operation:
	<ul>
		<li>The response status code MUST be an error status code. See <a href="#ErrorHandling">Error Handling</a> for details.</li>
		<li>The response body MUST be RDF that describes one or more <code>oslc:Error</code>
			resources that provide error information.</li>
	</ul>
	
	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		This defines unhappy path handling.
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-105"><font color="red"><b>[OSLCCORE-105]</b></font></a>
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-147"><font color="red"><b>[OSLCCORE-147]</b></font></a>
  		</font><br><br>
	</div>
	
	The <code>GET</code> or <code>POST</code> request MAY use zero, one or more of the OSLC query parameters listed in the table below.
	<br><br>
	<div style="margin-left: 2em">
		<table class="query">
			<tr>
				<th>Parameter</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><code>oslc.where</code></td>
				<td>Limits the query results to members that satisfy the specified query expression. If neither
					<code>oslc.where</code> nor <code>oslc.searchTerms</code> is specified, then the query
					results SHOULD be all the members of the resource type associated with the query capability.</td>
			</tr>
			<tr>
				<td><code>oslc.searchTerms</code></td>
				<td>Score each member resource using a full-text search on its text-valued properties, and sort them
					in descending order of score. If neither
					<code>oslc.where</code> nor <code>oslc.searchTerms</code> is specified, then the query
					results SHOULD be all the members of the resource type associated with the query capability.</td>
			</tr>
			<tr>
				<td><code>oslc.orderBy</code></td>
				<td>Sort the members using the sort keys, using the full-text search score as the primary key.</td>
			</tr>
			<tr>
				<td><code>oslc.select</code></td>
				<td>Include the specified immediate and nested properties of the member resources.</td>
			</tr>
			<tr>
				<td><code>oslc.properties</code></td>
				<td>Only return specified <i>selective properties</i> of the <i>query result container</i>.</td>
			</tr>
			<tr>
				<td><code>oslc.prefix</code></td>
				<td>Specify a namespace prefix that may be used in <code>oslc.where</code>, <code>oslc.orderBy</code>,
					<code>oslc.select</code>, and <code>oslc.properties</code>.</td>
			</tr>
			<tr>
				<td><code>oslc.paging</code></td>
				<td>Specifies whether a paged result is requested.
					See <a href="http://open-services.net/bin/view/Main/OslcCoreSpecification#Resource_Paging">Resource paging</a>.</td>
			</tr>
			<tr>
				<td><code>oslc.pageSize</code></td>
				<td>Specifies a suggested maximum page size for a paged result.
					See <a href="http://open-services.net/bin/view/Main/OslcCoreSpecification#Resource_Paging">Resource paging</a>.</td>
			</tr>
		</table>
	</div>	

</section>


<!-- Query Result Containers -->
<section>
	<h2>Query Result Containers</h2>
	
	<div style="margin-left: 2em">
		<font color="red">[David]<br>
		This is a new section that provides more explicit information about the response to a query and the
		query result container. Although this wasn't in the query spec explicitly, accompanying non-normative
		documents gave examples and I checked some existing implementations to check their returned RDF.
		The goal here is to achieve backwards compatibility with Query 2.0 (even though the spec didn't
		explicitly state this or give examples), and achieve conformance with LDPCs. OSLC Core 3.0 and
		OSLC Configuration Management make extensive use of LPDCs. In many cases, an LDPC is like a
		query result container, but not associated with a query capability and with a fixed query.
		Making query result containers brings consistency with these other LDPCs.
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-102"><font color="red"><b>[OSLCCORE-102]</b></font></a>
  		</font><br><br>
	</div>
	
	The response body for a successful <code>GET</code> or <code>POST</code> on a query base URI MUST include a query result container whose
	subject is the query base URI.
	
	<p>	The container SHOULD be a <i>Linked Data Platform Container</i> (LDPC) including a <code>ldp:contains</code> referencing each member 
	resource found by the query. The response SHOULD include a <code>Link</code> header that describes the type of LDPC returned.
	This provides compatibility with OSLC Core 3.0 and its wider use of LDPCs. [[LDP]]</p>
	
	<p>	If the query capability that declared the base URI does not declare a <code>oslc:resourceShape</code> then the container 
	MUST also include an <code>rdfs:member</code> reference to each of the result members.<p>
	
	<p>If the query capability that declared the base URI declares a <code>oslc:resourceShape</code> and that resource shape
	defines a container property with <code>oslc:isMemberProperty "true"^^xsd:boolean</code> that is not <code>ldp:contains</code>,
	the query result container MUST also contain the specified member property for each of the query result members.</p>
	
	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		The example below shows how an implementation can continue to use <code>rdfs:member</code>, either by default
		because no resource shape is referenced by the query capability, or because the resource shape explicitly
		defines rdfs:member as an OSLC property with <code>oslc:isMemberProperty "true"^^xsd:boolean</code>.
  		</font><br><br>
	</div>

	<pre class="example" title="Query result container using rdfs:member as the membership property">
HTTP/1.1 200 OK
Content-Type: text/turtle
ETag: "_87e52ce291112"
Link: &lt;http://www.w3.org/ns/ldp#DirectContainer>; rel="type",
      &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"


@prefix dcterms: &lt;http://purl.org/dc/terms/>.
@prefix ldp: &lt;http://www.w3.org/ns/ldp#>.
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#>.
@prefix ex: &lt;http://example.org/>.

&lt;http://example.org/queryBase/>
   a ldp:DirectContainer;
   ldp:membershipResource &lt;http://example.org/queryBase/>;
   ldp:hasMemberRelation rdfs:member;
   ldp:contains ex:member1, ex:member2;
   rdfs:member ex:member1, ex:member2.
	</pre>
	
	<p>If the query capability that declared the base URI declares a <code>oslc:resourceShape</code> and that resource shape
	defines a container property with <code>oslc:isMemberProperty "true"^^xsd:boolean</code> that is <code>ldp:contains</code>,
	the query result container may use any form of LDPC, such as ldp:BasicContainer. This provides the most compact representation
	of query result members that is compatible with OSLC Query 2.0 and conformant with LDPC [[LDP]]. All of the examples
	showing a query response following this section assume that the query capability resource shape defines that
	<code>ldp:contains</code> is the membership property.</p>
	
	<div style="margin-left: 4em">
		<font color="red">[David]<br>
		The example below shows how an implementation can implement a much simpler query result container that is
		both backwards compatible with Query 2.0 clients, and with LDPCs.
  		</font><br><br>
	</div>
	
	<pre class="example" title="Query result container using ldp:contains as the membership property">
HTTP/1.1 200 OK
Content-Type: text/turtle
ETag: "_87e52ce291112"
Link: &lt;http://www.w3.org/ns/ldp#BasicContainer>; rel="type",
      &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"


@prefix dcterms: &lt;http://purl.org/dc/terms/>.
@prefix ldp: &lt;http://www.w3.org/ns/ldp#>.
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#>.
@prefix ex: &lt;http://example.org/>.

&lt;http://example.org/queryBase/>
   a ldp:BasicContainer;
   ldp:contains ex:member1, ex:member2.
	</pre>
	
</section>    <!-- Query Result Containers -->


<!-- Query Result Paging -->
<section id="QueryResultPaging">
	<h2>Query Result Paging</h2>
	
	<div style="margin-left: 4em">
			<font color="red">[David]<br>
			This is a proposed new section. It should primarily reference OSLC 2.0 Paging, but add aspects that
			are likely to be relevant to query such as:
			<ul>
				<li>Including a <code>oslc:ResponseInfo</code>.</li>
				<li>How to handle long next page URIs (POST vs GET).</li>
			</ul>
  			</font>
	</div>
	
	
    A query capability MAY support 
    <a href="./oslc-core.html#resourcePaging" target="_blank">OSLC Core Resource Paging</a>. 
    <p>
    A paged response MAY occur automatically if the server determines that the total query result set exceeds some implementation dependent
    threshold, or if paging is supported and the request includes a <code>oslc.paging=true</code> query parameter.
    <p>
    A paged response to a query SHOULD include a <a href="./core-vocab.html#responseInfo" target="_blank">oslc:ResponseInfo</a> if there is a
    next page.
    <p>
    If the query was performed using a <code>POST</code> rather than a <code>GET</code>, the <code>oslc:ResponseInfo</code> SHOULD contain
    a <code>oslc:postBody</code> and the client should get the next query results page by performing a <code>POST</code> with the specified 
    post body using a content type of <code>application/x-www-form-urlencoded</code>.
    <a href="https://issues.oasis-open.org/browse/OSLCCORE-164"><font color="red"><b>[OSLCCORE-164]</b></font></a>

</section>    <!-- Query Result Paging -->



<!-- Query Parameters -->
<section id="queryParameters">
	<h2>Query Parameters</h2>

	<!-- Query Parameters/Introduction -->
	<section id="introduction">
		<h3>Introduction</h3>

		<p>The query parameters defined here are intended to satisfy simple query requirements, and be easy to both use and implement.
		More complex query requirements should be satisfied using a full query language, e.g. SQL or SPARQL.</p>

		<p>This specification formally defines the syntax of the query parameters using Extended Backus-Naur Form [[EBNF]]
		and informally illustrates  their semantics with simple examples. 

		<p>The query parameters MAY contain characters that MUST be URL encoded when transmitted in an HTTP request. The examples below show
		both unencoded and encoded query parameters for clarity.</p>

		<p>This specification defines the syntax of a set of related query parameters that MAY be used to perform queries.
		We have adopted a consistent naming convention for these query parameters to identify them as common across all OSLC specifications,
		namely all query parameter names are prefixed with the characters &quot;<code>oslc.</code>&quot; The following sections define
		these query parameters.</p>

		<p>An OSLC domain specification MAY use some or all of these query parameters, and SHOULD use these rather than defining new query parameters
		that have the same or very similar meanings. Each of these query parameters SHOULD appear at most once in a query. The behavior is undefined
		when a query parameter appears more than once.</p>

		<p>In the following sections, syntax is formally defined using a common extended form of BNF. Informal definitions and comments are delimited
		by <code>/*</code> and <code>*/</code>.</p>
	</section>    <!-- Query Parameters/Introduction -->


	<!-- Query parameters/oslc.where -->
	<section id="oslc.where">
		<h3>oslc.where</h3>
		
		<!-- Query parameters/oslc.where/introduction -->
		<section id="oslc.where.introduction">
			<h4>Introduction</h4>
			
			<p>The <code>oslc.where</code> query parameter defines a <i>query expression</i> that is used to query for resources
			matching the query expression. It is serves a similar purpose to the <code>WHERE</code> clause of a SQL statement.</p>
			
			<p>If an implementation does not support the <code>oslc.where</code> parameter, the response SHOULD be
			<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
			
			<div style="margin-left: 4em">
				<font color="red">[David]<br>
				This is a new requirement. Most implementations support <code>oslc.where</code>. However, if any do not,
				it's possible they may have used other error codes. Hence the requirement is a SHOULD not a MUST.
	  			</font><br><br>
			</div>
			
			
			<p>If <code>oslc.where</code> specifies a property that has an undefined namespace prefix, the response SHOULD be
			<code>400 Bad Request</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
			
			<div style="margin-left: 4em">
				<font color="red">[David]<br>
				This is a new requirement. RTC work item queries and GCM queries behave like this. However, because the
				spec did not define the behaviour, it's possible some might use other status codes. Hence this is a
				SHOULD not a MUST.
	  			</font><br><br>
			</div>
			
			<p>If <code>oslc.where</code> specifies a property that has an defined namespace prefix, but the property is not known, for
			example not defined in the resource shape for that type of resource, an implementation MAY do either of:</p>
			<ol>
				<li>Respond with a <code>400 Bad Request</code> as described in <a href="#ErrorHandling">Error Handling</a>.
					This is appropriate for implementations that have finite and enumerable properties of resources that
					cannot determine how to query for undefined properties.</li>
				<li>Execute the query and return a normal query response. This is appropriate for implementations that
					have open sets of properties, not all of which might be in a resource shape.</li> 
			</ol>
			
			<div style="margin-left: 4em">
				<font color="red">[David]<br>
				This reflects our discussion on 2017-12-14. Closed systems based on RDBs (probably the majority) will
				have well-defined vocabularies with custom properties being managed by a type system. Both RTC work item
				and GCM queries return 400 if a property is specified with a defined namespace but is not known.
				It's somewhat analogous to executing a SQL query where you specify an
				undefined column. Open systems based on RDF persistence and SPARQL might execute the
				query successfully, but the results might not be what the user expects, for example, being empty.
	  			</font><br><br>
			</div>
			
			
			<p>For example, suppose that a change management system provides a query capability with a query base of 
			<code>https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems</code>,
			and a client wants to query for all change requests created by the user <code>https://host:9443/jts/users/deb</code>.
			This can be performed using a <code>GET</code> on 
			<code>https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems</code> using the
			query parameters shown in the table below:
			<br><br>
			<div style="margin-left: 2em">
				<table class="query">
					<tr>
				    	<th>Parameter</th>
				    	<th>Unencoded value</th>
					</tr>
					<tr>
						<td><code>oslc.where</code></td>
						<td><code>dcterms:creator=&lt;https://host:9443/jts/users/deb></code></td>
					</tr>
				</table>
			</div>
			
	
			<div style="margin-left: 4em">
				<font color="red"><br>[David]<br>
				The example below was partly based on a real RTC work item query. However, I changed the host name to
				make it anonymous, and made the container an LPDC using <code>ldp:contains</code> as the container
				membership property (in some hypothetical resource shape).
	  			</font><br><br>
			</div>
			
			
			<pre class="example" title="Query for all change requests created by Deb">
	GET https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems
	    ?oslc.where=dcterms%3Acreator%3D%3Chttps%3A%2F%2Fhost%3A9443%2Fjts%2Fusers%2Fdeb%3E
	
	OSLC-Core-Version: 2.0
	Accept: text/turtle
	
	 -- response --
	200 OK
	Etag:  "5f836103-c64e-3c3f-aa5e-dd0baec92511"
	OSLC-Core-Version:  2.0
	Vary:  Accept, OSLC-Core-Version
	Content-Type:  text/turtle;charset=UTF-8
	Content-Language:  en-US
	Link: &lt;http://www.w3.org/ns/ldp#BasicContainer>; rel="type", &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"
	
	@prefix dcterms:  &lt;http://purl.org/dc/terms/> .
	@prefix ldp:     &lt;http://www.w3.org/ns/ldp#> .
	@prefix oslc:    &lt;http://open-services.net/ns/core#> .
	@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#> .
	@prefix rdf:     &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
	
	&lt;https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems>
	    a ldp:BasicContainer ;
	    ldp:contains 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/9> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/22> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/11> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/20> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/1> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/27> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/28> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/17> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/5> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/23> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/7> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/12> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/8> .
			</pre>
	
			Note that the query result in the above example does not contain any properties of the members found by the
			query because <code>oslc.select</code> was not specified, and the implementation does not have
			a default set of properties.
			
			<div style="margin-left: 4em">
				<font color="red">[David]<br>
				This reflects the proposal for 
				<a href="https://issues.oasis-open.org/browse/OSLCCORE-123"><font color="red"><b>[OSLCCORE-123]</b></font></a>.
	  			</font><br><br>
			</div>
			
			<p>Conditions may use the usual binary comparison operators and be combined using the boolean conjunction 
			operator, <code>and</code>.</p>
			
			<p>Suppose a client now wants to query for all change requests created by Deb that are not fixed.
			This can be performed using a <code>GET</code> on 
			<code>https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems</code> using the
			query parameters shown in the table below:</p>
			<br><br>
			<div style="margin-left: 2em">
				<table class="query">
					<tr>
				    	<th>Parameter</th>
				    	<th>Unencoded value</th>
					</tr>
					<tr>
						<td><code>oslc.where</code></td>
						<td><code>dcterms:creator=&lt;https://host:9443/jts/users/deb> and oslc_cm:fixed=false</code></td>
					</tr>
				</table>
			</div>
			
			
					<pre class="example" title="Query for all change requests created by Deb that are not fixed">
	GET https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems
	    ?oslc.where=dcterms%3Acreator%3D%3Chttps%3A%2F%2Fhost%3A9443%2Fjts%2Fusers%2Fdeb%3E%20and%20oslc_cm%3Afixed%3Dfalse
	
	OSLC-Core-Version: 2.0
	Accept: text/turtle
	
	 -- response --
	200 OK
	Etag:  "5f836103-c64e-3c3f-aa5e-dd0baec92511"
	OSLC-Core-Version:  2.0
	Vary:  Accept, OSLC-Core-Version
	Content-Type:  text/turtle;charset=UTF-8
	Content-Language:  en-US
	Link: &lt;http://www.w3.org/ns/ldp#BasicContainer>; rel="type", &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"
	
	@prefix dcterms:  &lt;http://purl.org/dc/terms/> .
	@prefix ldp:     &lt;http://www.w3.org/ns/ldp#> .
	@prefix oslc:    &lt;http://open-services.net/ns/core#> .
	@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#> .
	@prefix rdf:     &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
	
	&lt;https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems>
	    a ldp:BasicContainer ;
	    ldp:contains 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/22> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/20> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/1> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/27> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/28> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/5> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/23> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/7> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/8> .
			</pre>
			
			An <code>oslc.where</code> query expression may query for nested properties. The following example
			show a query for change requests created by any user named "Deb". This can be performed using a <code>GET</code> on 
			<code>https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems</code> using the
			query parameters shown in the table below:
			<br><br>
			<div style="margin-left: 2em">
				<table class="query">
					<tr>
				    	<th>Parameter</th>
					    <th>Unencoded value</th>
					</tr>
					<tr>
						<td><code>oslc.where</code></td>
						<td><code>dcterms:creator {foaf:name="Deb"}</code></td>
					</tr>
				</table>
			</div>
			
			<pre class="example" title="Query for all change requests created by any user named 'Deb'">
	GET https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems
	    ?oslc.where=dcterms%3Acreator%20%7Bfoaf%3Aname%3D%22Deb%22%7D
	
	OSLC-Core-Version: 2.0
	Accept: text/turtle
	
	 -- response --
	200 OK
	Etag:  "5f836103-c64e-3c3f-aa5e-dd0baec92511"
	OSLC-Core-Version:  2.0
	Vary:  Accept, OSLC-Core-Version
	Content-Type:  text/turtle;charset=UTF-8
	Content-Language:  en-US
	Link: &lt;http://www.w3.org/ns/ldp#BasicContainer>; rel="type", &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"
	
	@prefix dcterms:  &lt;http://purl.org/dc/terms/> .
	@prefix ldp:     &lt;http://www.w3.org/ns/ldp#> .
	@prefix oslc:    &lt;http://open-services.net/ns/core#> .
	@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#> .
	@prefix rdf:     &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
	
	&lt;https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems>
	    a ldp:BasicContainer ;
	    ldp:contains
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/9> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/22> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/11> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/20> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/1> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/27> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/28> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/17> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/5> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/23> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/7> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/12> , 
	        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/8> .
			</pre>				
		</section>    <!-- Query parameters/oslc.where/introduction -->
		
	
		<!-- Query parameters/oslc.where/syntax -->
		<section id="oslc.where.syntax">
			<h4>oslc.where Syntax</h4>
		
			<pre>
	oslc_where    ::= "oslc.where=" compound_term
	compound_term ::= simple_term (space? boolean_op space? simple_term)*
	simple_term   ::= term | scoped_term
	space         ::= " " /* a space character */
	boolean_op    ::= "and"
	term          ::= identifier_wc comparison_op value | identifier_wc space in_op space? in_val
	scoped_term   ::= identifier_wc "{" compound_term "}"
	identifier_wc ::= identifier | wildcard
	identifier    ::= PrefixedName
	PrefixedName  ::= /* see "SPARQL Query Language for RDF", http://www.w3.org/TR/rdf-sparql-query/#rPrefixedName */
	wildcard      ::= "*"
	comparison_op ::= "=" | "!=" | "&lt;" | ">" | "&lt;=" | ">="
	in_op         ::= "in"
	in_val        ::= "[" value ("," value)* "]"
	value         ::= uri_ref_esc | PrefixedName | literal_value
	uri_ref_esc   ::= /* an angle bracket-delimited URI reference in which > and \ are \-escaped. */
	literal_value ::= boolean | decimal | string_esc (LANGTAG | ("^^" PrefixedName))?
	boolean       ::= "true" | "false"
	decimal       ::= /* see "XML Schema Part 2: Datatypes Second Edition", http://www.w3.org/TR/xmlschema-2/ */
	string_esc    ::= /* a string enclosed in double quotes, with certain characters escaped. See below. */
	LANGTAG       ::= /* see "SPARQL Query Language for RDF", http://www.w3.org/TR/rdf-sparql-query/#rLANGTAG */
			</pre>
			
			The only changes between this syntax and the OSLC Query 2.0 <code>oslc.where</code> syntax is the addition
			of <code>PrefixedName</code> in the <code>value</code> element. The ability to use a prefixed name
			in a value is useful, especially for enumerated values, and its omission was an oversight in the
			OSLC Query 2.0 specification.
			<p>

			<div style="margin-left: 2em">
				<code>wildcard</code><br>
				As in the case of <code>oslc.properties</code>, the "*" <code>wildcard</code> matches any property.
				Implementations MAY support the use of the wildcard in property names and nested properties.
				If an implementation does not support a use of wildcard, the response status SHOULD be <code>501 Not Implemented</code>
				as described in <a href="#ErrorHandling">Error Handling</a>.
				<br>
				<br>
				<code>boolean_op</code><br>
				The <code>boolean_op</code> term represents a boolean operation that lets you combine simple boolean expressions to form a compound
				boolean expression. The only boolean operation allowed is " and " which represents conjunction. The boolean operator " or " for 
				disjunction is not allowed in the interests of keeping the syntax simple. The effect of " or " in the simple case of testing a 
				property for equality with one of several values can be achieved through the use of the " in " operator.
			
			
			
				For example, the following query expression might find change requests with severity "high" or "medium":
				<br><br>
				<div style="margin-left: 2em">
					<table class="query">
						<tr>
					    	<th>Parameter</th>
					 		<th>Unencoded value</th>
						</tr>
						<tr>
							<td><code>oslc.where</code></td>
							<td><code>oslc_cm:severity in ["high","medium"]</code></td>
						</tr>
					</table>
				</div>
				<pre class="example">
		    GET http://example.com/queryBase?oslc.where=oslc_cm%3Aseverity%20in%20%5B%22high%22%2C%22medium%22%5D
				</pre>
				<code>space</code><br>
				The <code>space</code> term represents a single space character. A space character MAY be used to delimit the <code>binary_op</code> term in
				the <code>compound_term</code> term to improve readability.
				<br>
				<br>
				<code>comparison_op</code><br>
				The <code>comparison_op</code> term represents one of the following binary comparison operators:
				<br><br>
				<div style="margin-left: 2em">
					<table class="query">
						<tr>
						  	<td>=</td>
						  	<td>test for equality</td>
						</tr>
						<tr>
							<td>!=</td>
							<td>test for inequality</td>
						</tr>
						<tr>
							<td>&lt;</td>
							<td>test less-than</td>
						</tr>
						<tr>
							<td>&gt;</td>
							<td>test greater-than</td>
						</tr>
						<tr>
							<td>&lt;=</td>
							<td>test less-than or equal</td>
						</tr>
						<tr>
							<td>&gt;=</td>
							<td>test greater-than or equal</td>
						</tr>
					</table>
				</div>
				<br>
				Semantics of datatypes and operations on these datatypes are described in 
				<a href="#oslc.where.semantics">oslc.where Semantics</a>.
				
				<br>
				<br>
				<code>in_op</code><br>
				The <code>in_op</code> term represents the operator " in " which is a test for equality to any of the values in a list.
				The list is a comma-separated sequence of values, enclosed in square brackets, whose syntax is defined by the term <code>in_val</code>.
				<br>
				<br>
				<code>value</code><br>
				The <code>value</code> term represents either a URI reference (<code>uri_ref_esc</code>), a 
				<code>PrefixedName</code> or a literal value (<code>literal_value</code>).
				The use of values and comparison operators is described in <a href="#oslc.where.semantics">oslc.where semantics</a>
				<br>
				<br>
				<code>literal_value</code><br>
				The <code>literal_value</code> term represents either a plain literal or a typed literal.
				A plain literal is a quoted string (<code>string_esc</code>), optionally followed by a language tag (<code>LANGTAG</code>).
				For example, <code>"Bonjour"@fr</code> is a plain literal with a language tag for French.
	
				<p>A typed literal is formed by suffixing a quoted string (<code>string_esc</code>) with "^^" followed by
				the prefixed name (<code>PrefixedName</code>) of a datatype URI. If the range of a property includes literal values from more than
				one datatype, then a typed literal MUST be used in order to avoid ambiguity. Otherwise a plain literal MAY be used and the service
				SHOULD infer the datatype.</p>
	
				<p>The terms <code>boolean</code> and <code>decimal</code> are short forms for typed literals.
				For example, <code>true</code> is a short form for <code>"true"^^xsd:boolean</code>code>,
				<code>42</code> is a short form for <code>"42"^^xsd:integer</code> and <code>3.14159</code> is a short form
				for <code>"3.14159"^^xsd:decimal</code>.</p>
	
				<code>decimal</code><br>
				The <code>decimal</code> term represents a decimal number as defined in XML Schema Part 2: Datatypes Second Edition.
				As mentioned above, this term is a short form for typed literals whose datatype URIs are either xsd:integer or xsd:decimal.
				An integer literal value is a special case of a decimal literal value, namely one in which the decimal point is omitted from the
				lexical representation. For example, 42 is a valid decimal number which happens also to be a valid integer and so it is a short
				form for the typed literal "42"^^xsd:integer.
				<br>
				<br>
				<code>string_esc</code><br>
				The <code>string_esc</code> term represents an arbitrary sequence of characters. The sequence of characters is enclosed in
				double quote (") characters. Therefore, the double quote character itself MUST be escaped. More generally, all occurrences of
				the double quote character in the string MUST be replaced by the sequence \" and all occurrences of the backslash character \
				in the actual value MUST be replaced by the sequence \\ in the escaped value. This escaping process MUST be reversed to give the
				actual value of the string.
				<br>
				<br>
				<code>scoped_term</code><br>
				The <code>scoped_term</code> represents the ability to query on nested properties. Servers MAY choose not to
				support such nested property queries, and SHOULD respond with <code>501 Not Implemented</code> if they are not
				supported.
			</div>
		</section>    <!-- Query parameters/oslc.where/syntax -->
	
	
		<!-- Query parameters/oslc.where/semantics -->
		<section id="oslc.where.semantics">
			<h4>oslc.where Semantics</h4>
			The data types supported in OSLC resource shapes are described in <i>Literal Value Types</i> in [[OSLCShape]].
			The table below shows the forms of <code>value</code> that might be used with a comparison operator, and
			which comparison operators MUST or MAY be supported, and their semantics.
			<p>
			<table class="query">
				<tr>
					<th>Value type</th>
					<th>Supported value forms</th>
					<th>Comparison operators</th>
				</tr>
				<tr>
					<td><code>rdf:XMLLiteral</code></td>
					<td>An XMLLiteral, such as <code>"abc"^^rdf:XMLLiteral</code>, MUST be supported. A server MAY treat the 
						literal in the same way as a plain string literal with the data type removed such as "abc".
						<p>
						A plain string literal, such as <code>"abc"</code> MUST be supported. A server MAY treat the literal 
						in the same way as an XML literal string such as <code>"abc"^^rdf:XMLLiteral</code>.
						<p>
						An xsd:string typed literal, such as <code>"abc"^^xsd:string</code>, MUST be supported. A server MAY treat
						the literal in the same way as an XML literal string such as <code>"abc"^^rdf:XMLLiteral</code>.
						<p>
						Servers MAY validate the string for compliance to the XMLLiteral standard.</td>
					<td>The operators <code>=</code>, <code>!=</code>, and <code>in</code> MUST be supported.
						<p>
						Servers MUST implement one of the following semantics:
						<ul>
							<li>case sensitive string compare</li>
							<li>case insensitive string compare</li>
							<li>case insensitive string pattern match where <code>%</code> means match zero or more characters, 
								and <code>_</code> means match any single character.</li>
						</ul>
						A server MAY choose which of the above to apply based on whether the string contains a <code>%</code> or 
						<code>_</code> character, and/or the property being compared.
						<p>
						Other operators MAY be supported and MAY have implementation-dependent semantics.
						A server MAY report such usage as unsupported.</td>
				</tr>
				<tr>
					<td><code>xsd:boolean</code></td>
					<td>The values <code>true</code> and <code>false</code> MUST be supported.
						<p>
						The values <code>"true"^^xsd:boolean</code> and <code>"false"^^xsd:boolean</code> MUST be supported
						and MUST have the same meaning as <code>true</code> and <code>false</code> respectively.
						<p>
						The values <code>"true"</code> and <code>"false"</code> MAY be supported, and if so, MUST have the
						same meaning as <code>true</code> and <code>false</code> respectively.
						<p>
						A language tagged literal, such as <code>"true"@en</code> MAY be supported and MAY have implementation
						and/or locale dependent behavior.</td>
					<td>The operators <code>=</code>, <code>!=</code>, and <code>in</code> MUST be supported.
						<p>
						Other operators MAY be supported and MAY have implementation-dependent semantics.</td>
				</tr>
				<tr>
					<td><code>xsd:dateTime</code></td>
					<td>Values that are conformant with an <code>xsd:dateTime</code>, as described in
						<a href="https://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#dt-dateTime">
						https://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#dt-dateTime</a>,
						such as <code>"2018-01-30T12:25:00"^^xsd:dateTime</code>, MUST be supported.
						<p>
						Plain string literals whose string value conforms to an <code>xsd:dateTime</code>, such as 
						<code>"2018-01-30T12:25:00"</code>, MAY be supported, and if so, MUST have the same meaning as 
						an <code>xsd:dateTime</code> typed literal such as <code>"2018-01-30T12:25:00"^^xsd:dateTime”</code>.</td>
					<td>The operators <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, 
						<code>&gt;=</code>, and <code>in</code> MUST be supported, and MUST have the semantics of a <code>xsd:dateTime</code>
						comparison.</td>
				</tr>
				<tr>
					<td><code>xsd:decimal</code></td>
					<td>Decimal literals with or without a decimal point, such as <code>42</code> and <code>42.0</code>, MUST be
						supported if the server supports <code>xsd:decimal</code> property values.
						<p>
						An <code>xsd:decimal</code> typed literal, such as <code>"42"^^xsd:decimal</code> or 
						<code>"42.0"^^xsd:decimal</code>, MUST be supported if the server supports <code>xsd:decimal</code> property values..
						<p>
						A plain string literal with a decimal value, such as <code>"42"</code> or <code>"42.0"</code>, MAY be supported,
						and if so, MUST have the same meaning as the <code>xsd:decimal</code> typed literal.</td>
					<td>The operators <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, 
						<code>&gt;=</code>, and <code>in</code> MUST be supported if the server supports <code>xsd:decimal</code> property values, 
						and if so, MUST have the semantics of a <code>xsd:decimal</code> comparison.</td>
				</tr>
				<tr>
					<td><code>xsd:double</code></td>
					<td>Decimal literals with or without a decimal point, such as <code>42</code> and <code>42.0</code>, MUST be
						supported if the server supports <code>xsd:double</code> property values.
						<p>
						An <code>xsd:double</code> typed literal, such as <code>"42"^^xsd:double</code> or 
						<code>"42.0"^^xsd:double</code>, MUST be supported if the server supports <code>xsd:double</code> property values.
						<p>
						A plain string literal with a double value, such as <code>"42"</code> or <code>"42.0"</code>, MAY be supported,
						and if so, MUST have the same meaning as the <code>xsd:double</code> typed literal.</td>
					<td>The operators <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, 
						<code>&gt;=</code>, and <code>in</code> MUST be supported if the server supports <code>xsd:double</code> property values, 
						and if so, MUST have the semantics of an  <code>xsd:double</code> comparison.</td>
				</tr>
				<tr>
					<td><code>xsd:float</code></td>
					<td>Decimal literals with or without a decimal point, such as <code>42</code> and <code>42.0</code>, MUST be
						supported if the server supports <code>xsd:float</code> property values.
						<p>
						An <code>xsd:float</code> typed literal, such as <code>"42"^^xsd:float</code> or 
						<code>"42.0"^^xsd:float</code>, MUST be supported if the server supports <code>xsd:float</code> property values.
						<p>
						A plain string literal with a float value, such as <code>"42"</code> or <code>"42.0"</code>, MAY be supported,
						and if so, MUST have the same meaning as the <code>xsd:float</code> typed literal.</td>
					<td>The operators <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, 
						<code>&gt;=</code>, and <code>in</code> MUST be supported if the server supports <code>xsd:float</code> property values, 
						and if so, MUST have the semantics of an  <code>xsd:float</code> comparison.</td>
				</tr>
				<tr>
					<td><code>xsd:integer</code></td>
					<td>Decimal literals without a decimal point, such as <code>42</code>, MUST be supported.
						<p>
						An <code>xsd:integer</code> typed literal, such as <code>"42"^^xsd:integer</code>, MUST be supported.
						<p>
						An <code>xsd:decimal</code> typed literal without a decimal point, such as <code>"42"^^xsd:decimal</code>, 
						MAY be supported, and if so, MUST have the same meaning as an <code>xsd:integer</code> typed literal.
						<p>
						A plain string literal with a decimal value, such as <code>"42"</code>, or a language tag string with a decimal
						value, such as <code>"42"@en</code>, MAY be supported, and if so, MUST have the same meaning as a decimal value.</td>
					<td>The operators <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, 
						<code>&gt;=</code>, and <code>in</code> MUST be supported and MUST have the semantics of an 
						<code>xsd:integer</code> comparison.</td>
				</tr>
				<tr>
					<td><code>xsd:string</code></td>
					<td>A plain string literal, such as <code>"abc"</code> MUST be supported.
						<p>
						An xsd:string typed literal, such as <code>"abc"^^xsd:string</code>, MUST be supported. A server MUST treat
						the literal in the same way as an plain string literal string such as <code>"abc"</code>.
						<p>
						An XMLLiteral, such as <code>"abc"^^rdf:XMLLiteral</code>, MUST be supported. A server MAY treat the literal
						in the same way as a plain literal string such as <code>"abc"</code>.
						<p>
						A string with a language tag, such as <code>"abc"@en</code>, MAY be supported. The string MAY be treated 
						as a plain string literal, or it MAY be treated as a language specific string that only matches a string
						with an identical value and language tag.</td>
					<td>The operators <code>=</code>, <code>!=</code>, and <code>in</code> MUST be supported.
						<p>
						Servers MUST implement one of the following semantics:
						<ul>
							<li>case sensitive string compare</li>
							<li>case insensitive string compare</li>
							<li>case insensitive string pattern match where <code>%</code> means match zero or more characters, 
								and <code>_</code> means match any single character.</li>
						</ul>
						A server MAY choose which of the above to apply based on whether the string contains a <code>%</code> or 
						<code>_</code> character, and/or the property being compared.
						<p>
						Other operators MAY be supported and MAY have implementation-dependent semantics.
						A server MAY report such usage as unsupported.</td>
				</tr>
				<tr>
					<td><code>oslc:Resource</code></td>
					<td>A uri_ref_esc such as <code>&lt;http://example.com&gt;</code>> MUST be supported.
						<p>
						A PrefixedName such as <code>oslc:Zero-or-many</code>, MAY be supported. If supported, the value
						MUST be treated as equivalent to its corresponding uri_ref_esc.</td>
					<td>The operators <code>=</code>, <code>!=</code>, and <code>in</code> MUST be supported.
						A server MUST implement this as a case-sensitive URI string comparison.
						<p>
						Other operators MAY be supported and MAY have implementation-dependent semantics, or a server MAY report 
						such usage as unsupported.
					</td>
				</tr>
			</table>
		
		</section>    <!-- Query parameters/oslc.where/semantics -->
	</section>     <!-- Query parameters/oslc.where -->


	<!-- Query parameters/oslc.searchTerms -->
	<section id="oslc.searchTerms">
		<h3>oslc.searchTerms</h3>

		Resource properties often contain text so it is useful to search for resources that contain specified terms.
		The <code>oslc.searchTerms</code> query parameter lets you perform a full-text search [[FULLTEXT-SEARCH]]
		on a set of resources. In a full-text search, each resource is matched against the list of search terms and assigned a numeric score.
		A high score indicates a good match. The matching resources are returned in the response, sorted by the score in descending order.
		Each resource that is returned in the response is annotated with a special property, <code>oslc:score</code>, that gives its
		match score.
		
		<p>If an implementation does not support the <code>oslc.searchTerms</code> parameter, the response should be
		<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
		
		<div style="margin-left: 4em">
			<font color="red">[David]<br>
				This defines unhappy paths:
				<a href="https://issues.oasis-open.org/browse/OSLCCORE-105"><font color="red"><b>[OSLCCORE-105]</b></font></a>
  			</font><br><br>
		</div>

		<p>An OSLC domain specification that supports full-text search SHOULD specify which resource properties are indexed so that
		search results are consistent across implementations.

		<p>When <code>oslc.searchTerms</code> is used in the request, each matching resource (hit) in the response MAY contain an
		<code>oslc:score</code> property. Note that <code>oslc:score</code> is not purely a property of the resource since it also depends on the
		search terms. It is therefore a pseudo-property whose validity is limited to the HTTP response.</p>

		<p>The <code>oslc:score</code> property MUST be a non-negative number and SHOULD be in the range from 0-100.
		Results MUST be ordered with the entry with the largest <code>oslc:score</code> occurring first.</p>

		<p>The <code>oslc.orderBy</code> query parameter MAY be used with <code>oslc.searchTerms</code>.
		When <code>oslc.orderBy</code> is used with <code>oslc.searchTerms</code> the result MUST be first sorted in descending order by
		the <code>oslc:score</code> pseudo-property, and then by the other sort keys specified in <code>oslc.orderBy</code>.
		This behavior is like prepending the list of sort keys specified in <code>oslc.orderBy</code> with the key <code>-oslc:score</code>.
		However, the pseudo-property <code>oslc:score</code> MUST NOT appear explicitly in <code>oslc.orderBy</code>.</p>

		<p>The <code>oslc.where query</code> parameter MAY be used with <code>oslc.searchTerms</code>. If an implementation
		does not support such combined usage, the response should be <code>501 Not Implemented</code> as described in
		<a href="#ErrorHandling">Error Handling</a>. When <code>oslc.where</code> is used with <code>oslc.searchTerms</code> 
		and is supported, then the set of resources searched for matches MUST be restricted to only those resources that satisfy
		the conditions in <code>oslc.where</code>.
		
		<div style="margin-left: 4em">
			<font color="red">[David]<br>
				This defines unhappy paths:
				<a href="https://issues.oasis-open.org/browse/OSLCCORE-105"><font color="red"><b>[OSLCCORE-105]</b></font></a>
  			</font><br><br>
		</div>
		
		For example, the following query returns the high severity change requests
		that deal with database performance:
		<br><br>
		<div style="margin-left: 2em">
			<table class="query">
				<tr>
				   	<th>Parameter</th>
					<th>Unencoded value</th>
				</tr>
				<tr>
					<td><code>oslc.where</code></td>
					<td><code>oslc_cm:severity="high"</code></td>
				</tr>
				<tr>
					<td><code>oslc.searchTerms</code></td>
					<td><code>"database","performance"</code></td>
				</tr>
			</table>
		</div>
		

		<pre class="example">		
    GET http://example.com/queryBase?oslc.where=oslc_cm%3Aseverity%3D%22high%22
        &amp;oslc.searchTerms=%22database%22%2C%22performance%22
		</pre>

		<!-- Query parameters/oslc.searchTerms/syntax -->
  		<section id="oslc.searchTerms.syntax">
			<b>Syntax</b><br>
			<pre>
	oslc_searchTerms ::= "oslc.searchTerms=" search_terms
	search_terms     ::= string_esc ("," string_esc)*
			</pre>
  		</section>    <!-- Query parameters/oslc.searchTerms/syntax -->

	</section>    <!-- Query parameters/oslc.searchTerms -->


	<!-- Query parameters/oslc.orderBy -->
	<section id="oslc.orderBy">
		<h3>oslc.orderBy</h3>
		
		<p>The <code>oslc.orderBy</code> query parameter lets you sort the result set. It is like the <code>ORDER BY</code> clause of a
		SQL statement.
		
		<div style="margin-left: 4em">
			<font color="red">[David]<br>
				The spec was unclear whether it only applied to <code>oslc.searchTerms</code> or how clients
				could determine ordering given the query result container contains a flat list of member references.
				<a href="https://issues.oasis-open.org/browse/OSLCCORE-143"><font color="red"><b>[OSLCCORE-143]</b></font></a>
  			</font><br><br>
		</div>
		
		
		<p>If an implementation does not support the <code>oslc.orderBy</code> parameter, the response SHOULD be
		<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.
		If <code>oslc.orderBy</code> specifies a property on which ordering is not supported, the response
		SHOULD be <code>400 Bad Request</code>.</p>
		
		<p>If a server supports the <code>oslc.orderBy</code> parameter and this is specified in the request:
		<ul>
			<li>A paged response SHOULD reflect the ordering of members specified by <code>oslc.orderBy</code>. For example,
				if <code>orderBy=+dcterms:created</code> is specified, the first page should contain the members that
				were created earliest, and any subsequent pages should contain members created on or after the
				members in the previous page.</li>
			<li>The query result MAY include a <code>oslc:order</code> property that reflects the ordering of the
				the members specified by <code>oslc.orderBy</code>. Note that <code>oslc:order</code> is not purely a 
				property of the resource since it also depends on the <code>oslc.orderBy</code> value. It is therefore
				a pseudo-property whose validity is limited to the HTTP response.</li>
		</ul>
		
		<p>If <code>oslc.orderBy</code> is not specified, the ordering of the results is undefined and MAY be
		implementation-dependent.</p>

		<p>You can specify a list of one or more immediate or nested properties of the resources in the member list, and a sort direction for each
		where " + " means ascending order and " -" means descending order. The following example sorts the high severity change requests by 
		the name of the creator, with most recently created first:</p>
		
		<br><br>
		<div style="margin-left: 2em">
			<table class="query">
				<tr>
				   	<th>Parameter</th>
					<th>Unencoded value</th>
				</tr>
				<tr>
					<td><code>oslc.where</code></td>
					<td><code>oslc_cm:severity="high"</code></td>
				</tr>
				<tr>
					<td><code>oslc.orderBy</code></td>
					<td><code>dcterms:creator{+foaf:name},-dcterms:created</code></td>
				</tr>
			</table>
		</div>
		
		
		
		<pre class="example" title="Sort high severity change requests created by creator name, and created date-time">
	GET http://example.com/queryBase
	    ?oslc.orderBy=dcterms%3Acreator%7B%2Bfoaf%3Aname%7D%2C-dcterms%3Acreated
		&amp;oslc.where=oslc_cm%3Aseverity%3D%22high%22
		</pre>

		<!-- Query parameters/oslc.orderBy/Syntax -->
		<section id="oslc.orderBy.syntax">
			<b>Syntax</b><br>
			<pre>
	oslc_orderBy        ::= "oslc.orderBy=" sort_terms
	sort_terms          ::= sort_term ("," sort_term)*
	sort_term           ::= scoped_sort_terms | ("+" | "-") identifier
	scoped_sort_terms   ::= identifier "{" sort_terms "}"
			</pre>
		</section>    <!-- Query parameters/oslc.orderBy/Syntax -->
	</section>    <!-- Query parameters/oslc.orderBy -->


	<!-- Query parameters/oslc.select -->
	<section id="oslc.select">
		<h3>oslc.select</h3>

		<p>The <code>oslc.select</code> query parameter lets you specify which immediate and nested properties of the resources in the member list
		to be included in the response. It is like the <code>SELECT</code> clause of a SQL statement.</p>
		
		<p>If <code>oslc.select</code> is not specified, the response MAY include some or none of the properties of members in the
		query result container. Servers SHOULD avoid returning a large number of properties of members by default. If a server chooses
		to include a multi-valued property by default, and the query response is not paged, it MUST include all the values of that property.</p>
		
		<p>Servers SHOULD accept the value <code>rdf:nil</code>. If specified as the only property, servers SHOULD omit all properties
		of the member resources. If <code>oslc.select</code> specifies <code>rdf:nil</code> and other properties, servers MAY choose to
		respond with <code>400 Bad Request</code>, or ignore the <code>rdf:nil</code>, or have other implementation dependent
		behavior.</p>
		
		<p>If an implementation does not support the <code>oslc.select</code> parameter, the response SHOULD be
		<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
		
		<p>If <code>oslc.select</code> specifies a property that has an undefined namespace prefix, the response SHOULD be
		<code>400 Bad Request</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
		
		<p>If <code>oslc.select</code> specifies a property that has an defined namespace prefix, but the property is not known, a
		server SHOULD ignore the unknown property rather than report an error.

		<p>The syntax of the <code>oslc.select</code> query parameter is the same as that of the <code>oslc.properties</code> query parameter.
		See <a href="oslc-core.html#selectiveProperties">Core 3.0 Selective Properties</a> for the syntax.
		However, the property names that appear in the <code>oslc.select</code> query parameter are those that belong to the 
		resources in the member list as opposed to those that belong to the starting subject resource which is that of
		the <i>query result container</i>.
		<a href="https://issues.oasis-open.org/browse/OSLCCORE-122"><font color="red"><b>[OSLCCORE-122]</b></font></a></p>
		
		<p>As in the case of <code>oslc.properties</code>, the wildcard is equivalent to the list of all properties of the member resources.
		Implementations MAY support the use of the wildcard for immediate and/or nested properties of member resources.
		If a specific use of the wildcard in <code>oslc.select</code> is not supported, the response should be
		<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.
		
		<div style="margin-left: 4em">
			<font color="red">[David]<br>
				This defines unhappy paths:
				<a href="https://issues.oasis-open.org/browse/OSLCCORE-138"><font color="red"><b>[OSLCCORE-138]</b></font></a>
  			</font><br><br>
		</div>
		
		<p>A server MAY include additional member properties in the response to those specified in the 
		<code>oslc.select</code> query parameter. Clients SHOULD NOT assume that only the specified
		properties will be included.
		
		<div style="margin-left: 4em">
			<font color="red">[David]<br>
				Existing implementations often include <code>rdf:type</code> with the specified properties.
  			</font><br><br>
		</div>

		<p>For example, the following query finds the change requests created by any user named "Deb" and includes the
		<code>dcterms:title</code> and <code>dcterms:creator</code> for each change request found by the query.
		<br><br>
		<div style="margin-left: 2em">
			<table class="query">
				<tr>
				    <th>Parameter</th>
				    <th>Unencoded value</th>
				</tr>
				<tr>
					<td><code>oslc.where</code></td>
					<td><code>dcterms:creator {foaf:name="Deb"}</code></td>
				</tr>
				<tr>
					<td><code>oslc.select</code></td>
					<td><code>dcterms:title,dcterms:creator</code></td>
				</tr>
			</table>
		</div>
		
		<pre class="example" title="Query for all change requests created by any user named 'Deb'">
GET https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems
    ?oslc.where=dcterms%3Acreator%20%7Bfoaf%3Aname%3D%22Deb%22%7D
    &amp;oslc.select=dcterms%3Atitle%2Cdcterms%3Acreator

OSLC-Core-Version: 2.0
Accept: text/turtle

 -- response --
200 OK
Etag:  "5f836103-c64e-3c3f-aa5e-dd0baec92511"
OSLC-Core-Version:  2.0
Vary:  Accept, OSLC-Core-Version
Content-Type:  text/turtle;charset=UTF-8
Content-Language:  en-US
Link: &lt;http://www.w3.org/ns/ldp#BasicContainer>; rel="type", &lt;http://www.w3.org/ns/ldp#Resource>; rel="type"

@prefix dcterms:  &lt;http://purl.org/dc/terms/> .
@prefix ldp:     &lt;http://www.w3.org/ns/ldp#> .
@prefix oslc:    &lt;http://open-services.net/ns/core#> .
@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:     &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

&lt;https://host:9443/ccm/oslc/contexts/_by884MNWEeekg_dNxwf1pg/workitems>
    a ldp:BasicContainer ;
    ldp:contains
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/9> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/22> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/11> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/20> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/1> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/27> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/28> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/17> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/5> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/23> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/7> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/12> , 
        &lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/8> .
        
&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/9>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "To many messages logged in the console"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/22>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Calculation error"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/11>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Some accessibility issues"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/20>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Browser Exception"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/1>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Not possible to change a user password"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/27>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Improve link colors"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/28>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Login not working anymore"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/17>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Increase size of overall application window"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/5>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Improve loan calculation algorithm"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/23>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Search is not finding this term"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/12>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Button sizes are too small"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/7>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Offer more services related to loans"^^rdf:XMLLiteral .

&lt;https://host:9443/ccm/resource/itemName/com.ibm.team.workitem.WorkItem/8>
      a       oslc_cm:ChangeRequest ;
      dcterms:creator &lt;https://host:9443/jts/users/deb> ;
      dcterms:title "Add context sensitive help support everywhere"^^rdf:XMLLiteral .
		</pre>		
	</section>    <!-- Query parameters/oslc.select -->


	<!-- Query parameters/oslc.properties -->
	<section id="oslc.properties">
		<h3>oslc.properties</h3>

		<p>The <code>oslc.properties</code> query parameter lets you specify which immediate properties of the query result
		container to include.</p>
		
		<p>If <code>oslc.properties</code> is not specified, the response SHOULD include all the properties of the
		query result container.</p>
		
		<p>If an implementation does not support the <code>oslc.properties</code> parameter, the response SHOULD be
		<code>501 Not Implemented</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
		
		<p>If <code>oslc.oslc.properties</code> specifies a property that has an undefined namespace prefix, the response SHOULD be
		<code>400 Bad Request</code> as described in <a href="#ErrorHandling">Error Handling</a>.</p>
		
		<p>If <code>oslc.oslc.properties</code> specifies a property that has an defined namespace prefix, but the property is not known, a
		server SHOULD ignore the unknown property rather than report an error.

		<p>The syntax of the <code>oslc.properties</code> query parameter is described in
		<a href="oslc-core.html#selectiveProperties">Core 3.0 Selective Properties</a>.
	</section>    <!-- Query parameters/oslc.properties -->
	
	<!-- Query parameters/oslc.paging -->
	<section id="oslc.paging">
		<h3>oslc.paging</h3>
		<div style="margin-left: 2em">
		<font color="red">[David]<br>
			I've added this section to the query specification to provide an example and because I found that some implementations 
			either always give a paged response, or do so when the query result exceeds a certain size.
		</font><br><br>
	    </div>
		Servers MAY support a <code>oslc.paging</code> query parameter. Implementations MAY choose to ignore the parameter.
		Servers that support paging of query results SHOULD use a paged response when <code>oslc.paging=true</code>
		is specified. Servers MAY also provide a paged response if the parameter is not specified and the query
		result includes a large number of members or a large number of RDF statements.
	   
	    <pre class="example" title="Query for all change requests with paging">	
		GET https://localhost:9443/jazz/oslc/contexts/_Q2fMII8EEd2Q-OW8dr3S5w/workitems&oslc.paging=true
Accept: text/turtle
OSLC-Core-Version: 2.0

 -- response --
200 OK
Date:  Fri, 11 May 2018 09:49:35 GMT
X-Powered-By:  Servlet/3.0
Etag:  "ca3acc7e-36b4-3c35-a51c-08d29266c24c"
Expires:  Fri, 11 May 2018 09:49:35 GMT
OSLC-Core-Version:  2.0
Vary:  Accept,OSLC-Core-Version
Content-Type:  text/turtle;charset=UTF-8
Content-Language:  en-US
Cache-Control:  private, must-revalidate, max-age=0, no-cache=set-cookie
X-Cluster-SA:  Node-Jazz
Set-Cookie:  JSA_AUTH_COMPLETE=true; Path=/; Secure
X-jazzweb3:  D=466712 t=1526032175078031
Transfer-Encoding:  chunked
Strict-Transport-Security:  max-age=31536000; includeSubDomains

@prefix dcterms:  &lt;http://purl.org/dc/terms/> .
@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:     &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix oslc:    &lt;http://open-services.net/ns/core#> .

&lt;https://localhost:9443/jazz/oslc/contexts/_Q2fMII8EEd2Q-OW8dr3S5w/workitems>
    a ldp:BasicContainer ;
        ldp:contains 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/126544> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/163518> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/99398> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/157559> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/128024> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/126992> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/90641> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/163178> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/276059> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/95469> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/217716> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/161823> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/42317> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/70584> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/126434> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/104751> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/139381> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/263005> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/105938> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/133616> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/204463> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/250934> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/66180> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/52981> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/69789> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/112342> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/210019> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/78577> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/100271> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/109336> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/72037> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/128115> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/71659> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/104241> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/75103> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/182157> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/156808> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/108460> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/47283> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/285162> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/135240> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/206800> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/117595> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/59362> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/135620> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/222107> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/133136> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/80140> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/251947> , 
            &lt;https://localhost:9443/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/74496> .

&lt;https://localhost:9443/jazz/oslc/contexts/_Q2fMII8EEd2Q-OW8dr3S5w/workitems?_resultToken=_nIokIFUAEeibptZOC98gng&oslc.pageSize=50&_startIndex=0>
    a       oslc:ResponseInfo ;
    oslc:nextPage &lt;https://localhost:9443/jazz/oslc/contexts/_Q2fMII8EEd2Q-OW8dr3S5w/workitems?_resultToken=_nIokIFUAEeibptZOC98gng&oslc.pageSize=50&_startIndex=50> ;
    oslc:totalCount "82991" ;
    dcterms:title "Work Items" .
</pre>
	</section>    <!-- Query parameters/oslc.paging -->
	
	<!-- Query parameters/oslc.pageSize -->
	<section id="oslc.pageSize">
		<h3>oslc.pageSize</h3>
		<div style="margin-left: 2em">
		<font color="red">[David]<br>
			I've added this section to the query specification because implementations may have some practical 
			considerations about how they determine the page boundaries.
		</font><br><br>
	    </div>
	    
		Servers MAY support a <code>oslc.pageSize</code> query parameter. Implementations MAY choose to ignore the parameter,
		or MAY use it as a hint for how a response should be paged and use page boundaries that do not exactly match the
		specified page size. The page size is expressed in terms of the number of RDF statements that are included in the
		response body.
	</section>    <!-- Query parameters/oslc.pageSize -->
</section>    <!-- Query parameters -->




<section id="ErrorHandling">
    <h2>Error Handling</h2>
    
    <div style="margin-left: 4em">
		<font color="red">[David]<br>
			This is a new section describing unhappy paths.
			<a href="https://issues.oasis-open.org/browse/OSLCCORE-134"><font color="red"><b>[OSLCCORE-134]</b></font></a>
			<a href="https://issues.oasis-open.org/browse/OSLCCORE-147"><font color="red"><b>[OSLCCORE-147]</b></font></a>
			<a href="https://issues.oasis-open.org/browse/OSLCCORE-149"><font color="red"><b>[OSLCCORE-149]</b></font></a>
  		</font><br><br>
	</div>

    If a <code>GET</code> or <code>POST</code> of a query base URI cannot be executed, the response MUST include a response 
    body whose RDF contains at least one <code>oslc:Error</code> describing the cause of the error.
    
    <p>If the error is due to use of an OSLC query parameter that is not supported, the response status SHOULD be <code>501 Not Implemented</code>.
    Implementations that do not support a specific query parameter need not parse its value.</p>

	<p>If the error is due to a supported but malformed query parameter value, such as one that does not match the supported syntax, then
	the response status code SHOULD be <code>400 Bad Request</code>.</p>
	
	<p>If the query has well-formed syntactically valid query parameter values, but the implementation does not support
	a specific use of such a query parameter, the response status SHOULD be <code>501 Not Implemented</code>.</p>
	
	<p>If the query is valid, but the server failed to execute the request in some unexpected way, then the response
	status SHOULD be <code>500 Internal Server Error</code>.</p>
</section>



<section class='appendix informative'>
  <h2>Acknowledgements</h2>
  <p>The following individuals have participated in the creation of this specification and are gratefully acknowledged:</p>

<p><b>Participants</b>:</p><p style="margin-left: 40px">
James Amsden, IBM (Editor)<br>
Geoff Clemm,  IBM<br>
Nick Crossley, IBM (Chair)<br>
Ian Green, IBM<br>
Peter Hack, IBM<br>
David Honey, IBM<br>
Sam Padget, IBM<br>
Martin Pain, IBM<br>
Martin Sarabura, PTC<br>
Brian Steele, IBM<br></p>
</section>


<section class="appendix informative" id="history">
<h2>Change History</h2>
<table border=1 cellspacing=0 cellpadding=0>
 <tr>
  <td width=103 valign=top style='width:77.4pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'><b>Revision</b></td>
  <td width=96 valign=top style='width:1.0in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'><b>Date</b></td>
  <td width=144 valign=top style='width:1.5in;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'><b>Editor</b></td>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'><b>Changes Made</b></td>
 </tr>
 <tr>
  <td>01</td>
  <td>07/06/2016</td>
  <td>Jim Amsden</td>
  <td>CSD was approved and published.</td>
</table>
</section>

</body>
</html>



